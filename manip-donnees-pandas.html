<!DOCTYPE html>
<html lang="fr">

<head>
<title>Manipulation de donn√©es avec pandas</title>    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="Le blog statistiques et data science de la coop√©rative Statoscop" />
  <meta name="author" content="" />

  <!-- Font Awesome icons (free version)-->
  <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
  <!-- Google fonts-->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />



  <!-- <title>Le blog de Statoscop - √©tudes de cas en R et Python</title> -->
  <link rel="icon" type="image/x-icon" href="https://blog.statoscop.fr/themes/statoscop/static/images/favicon-v1.ico" />


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
<link href="https://blog.statoscop.fr/manip-donnees-pandas.html" rel="canonical" />
  <!-- Feed -->
        <link href="https://blog.statoscop.fr/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Le blog Full Atom Feed" />
          <link href="https://blog.statoscop.fr/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Le blog Categories Atom Feed" />

  <!-- <link href="https://blog.statoscop.fr/themes/statoscop/static/css/style.css" type="text/css" rel="stylesheet" />-->
  <link href="https://blog.statoscop.fr/themes/statoscop/static/css/style-site.css" type="text/css" rel="stylesheet" /> 
  <!-- <link href="https://blog.statoscop.fr/themes/statoscop/static/css/style_fusion.css" type="text/css" rel="stylesheet" /> -->
  <!-- Code highlight color scheme -->
      <link href="https://blog.statoscop.fr/themes/statoscop/static/css/code_blocks/github.css" rel="stylesheet">

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!-- [if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  ![endif] -->



    <meta name="description" content="Tour d'horizon des mani√®res de filtrer des observations et s√©lectionner des colonnes avec pandas">

    <meta name="author" content="Antoine">

    <meta name="tags" content="Python">
    <meta name="tags" content="Statistiques">
    <meta name="tags" content="Data Science">
    <meta name="tags" content="index">
    <meta name="tags" content="loc">
    <meta name="tags" content="iloc">
    <meta name="tags" content="colonnes">
    <meta name="tags" content="lignes">




<!-- Open Graph -->
<meta property="og:site_name" content="Le blog"/>
<meta property="og:title" content="Manipulation de donn√©es avec pandas"/>
<meta property="og:description" content="Tour d'horizon des mani√®res de filtrer des observations et s√©lectionner des colonnes avec pandas"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://blog.statoscop.fr/manip-donnees-pandas.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2022-10-12 00:00:00+02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://blog.statoscop.fr/author/antoine.html">
<meta property="article:section" content="Python"/>
<meta property="article:tag" content="Python"/>
<meta property="article:tag" content="Statistiques"/>
<meta property="article:tag" content="Data Science"/>
<meta property="article:tag" content="index"/>
<meta property="article:tag" content="loc"/>
<meta property="article:tag" content="iloc"/>
<meta property="article:tag" content="colonnes"/>
<meta property="article:tag" content="lignes"/>
<meta property="og:image" content="https://blog.statoscop.fr/images/cover_11.png">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Manipulation de donn√©es avec pandas",
  "headline": "Manipulation de donn√©es avec pandas",
  "datePublished": "2022-10-12 00:00:00+02:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Antoine",
    "url": "https://blog.statoscop.fr/author/antoine.html"
  },
  "image": "https://blog.statoscop.fr/images/cover_11.png",
  "url": "https://blog.statoscop.fr/manip-donnees-pandas.html",
  "description": "Tour d'horizon des mani√®res de filtrer des observations et s√©lectionner des colonnes avec pandas"
}
</script>
  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//matomo.statoscop.fr/matomo/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '1']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->

  

</head>
<!-- TODO : Body class -->
  <body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">

        <a class="navbar-brand" href="https://statoscop.fr"><img src="https://blog.statoscop.fr/themes/statoscop/static/images/logo-statoscop-v1.png" alt="Statoscop.logo"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav text-uppercase ml-auto">
              <li class="nav-item font-weight-bold">
                  <a class="nav-link js-scroll-trigger " href="https://statoscop.fr"> Accueil </a>
              </li>
              <li class="nav-item font-weight-bold">
                  <a class="nav-link js-scroll-trigger " href="https://statoscop.fr/about"> √Ä propos </a>
              </li>
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle font-weight-bold "
                  id="navbarDropdownMenuLink" aria-haspopup="true" aria-expanded="false"> Prestations </a>
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                      <li><a class="dropdown-item" href="https://statoscop.fr/etudes">Conseils & √©tudes statistiques</a></li>
                      <li><a class="dropdown-item" href="https://statoscop.fr/recodages">Migrations de code & Recodages</a></li>
                      <li><a class="dropdown-item" href="https://statoscop.fr/formations">Formations</a></li>
                      <li><a class="dropdown-item" href="https://statoscop.fr/applis">Dashboards & Applications</a></li>
                  </ul>
              </li>
              <li class="nav-item font-weight-bold">
                  <a class="nav-link js-scroll-trigger " href="https://statoscop.fr/contact">Contact</a>
              </li>
              <li class="nav-item font-weight-bold">
                  <a class="nav-link js-scroll-trigger active" href="https://blog.statoscop.fr/">Le blog</a>
              </li>
          </ul>
      </div>
      </div>
    </nav>
    


    <!-- Post content -->
    <main class="content" role="main">
      
      <div>
      </div>

      <article class="post">
        <div class="inner">




            <section class="post-content">
              <h1 class="post-title">Manipulation de donn√©es avec pandas</h1>
                <!-- Le titres et meta infos-->
                <span class="post-meta">
                        <a href="https://blog.statoscop.fr/author/antoine.html">Antoine</a>
                    | <time datetime="mer. 12 octobre 2022">mer. 12 octobre 2022</time>
                </span>

                <!--Table des matieres
-->
                
                <div class="toc"><span class="toctitle">Table des mati√®res</span><ul>
<li><a href="#filtrer-des-observations">Filtrer des observations</a><ul>
<li><a href="#a-partir-de-leur-position-avec-iloc">√Ä partir de leur position avec iloc</a></li>
<li><a href="#a-partir-de-leur-index-avec-loc">√Ä partir de leur index avec loc</a></li>
<li><a href="#a-partir-de-conditions-avec-loc-et">√Ä partir de conditions avec loc et []</a></li>
</ul>
</li>
<li><a href="#selectionner-des-variables">S√©lectionner des variables</a><ul>
<li><a href="#a-partir-de-leur-position-avec-iloc_1">√Ä partir de leur position avec iloc</a></li>
<li><a href="#a-partir-de-leur-nom-avec-loc-et">√Ä partir de leur nom avec loc et []</a></li>
<li><a href="#a-partir-de-conditions-avec-loc">√Ä partir de conditions avec loc</a></li>
</ul>
</li>
<li><a href="#synthese-jutilise-quoi-du-coup">Synth√®se : j'utilise quoi du coup?</a><ul>
<li><a href="#iloc-ou-loc">iloc ou loc ?</a></li>
<li><a href="#ou-loc">[] ou loc?</a></li>
</ul>
</li>
</ul>
</div>
<p>Dans cet article, on va essayer de clarifier les diff√©rentes options qui s'offrent √† vous pour manipuler vos donn√©es avec Python en utilisant la librairie <code>pandas</code>. On se place dans le cas d'un tableau de donn√©es <em>tidy</em>, c'est √† dire o√π chaque <strong>colonne</strong> repr√©sente une <strong>variable</strong>, ou caract√©ristique, et chaque <strong>ligne</strong> une <strong>observation</strong>. Dans ce cadre, on pr√©sente les options possibles pour :  </p>
<ul>
<li><strong>Filtrer les observations</strong>, c'est √† dire conserver certaines lignes.   </li>
<li><strong>S√©lectionner des variables</strong>, c'est √† dire conserver certaines colonnes.     </li>
</ul>
<p>En particulier, on mettra l'accent sur les diff√©rences entre les fonctions <code>loc</code> et <code>iloc</code> et le r√¥le particulier des index. Pour illustrer cet article, on s'appuie sur la base de donn√©es <code>titanic</code>, <a href="https://www.kaggle.com/datasets/heptapod/titanic">disponible notamment sur Kaggle</a>. On importe la version csv de cette base avec <code>read_csv</code> et on affiche ses caract√©ristiques :    </p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">pandas</span> <span class="k">as</span> <span class="nn">pd</span>

<span class="n">titanic</span> <span class="o">=</span> <span class="n">pd</span><span class="o">.</span><span class="n">read_csv</span><span class="p">(</span><span class="s1">&#39;Data/titanic-survival.csv&#39;</span><span class="p">)</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">shape</span><span class="p">)</span>
<span class="n">titanic</span><span class="o">.</span><span class="n">tail</span><span class="p">()</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>(1309, 14)
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>1304</th>
      <td>3</td>
      <td>0</td>
      <td>Zabour, Miss. Hileni</td>
      <td>female</td>
      <td>14.5</td>
      <td>1</td>
      <td>0</td>
      <td>2665</td>
      <td>14.4542</td>
      <td>NaN</td>
      <td>C</td>
      <td>NaN</td>
      <td>328.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1305</th>
      <td>3</td>
      <td>0</td>
      <td>Zabour, Miss. Thamine</td>
      <td>female</td>
      <td>NaN</td>
      <td>1</td>
      <td>0</td>
      <td>2665</td>
      <td>14.4542</td>
      <td>NaN</td>
      <td>C</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1306</th>
      <td>3</td>
      <td>0</td>
      <td>Zakarian, Mr. Mapriededer</td>
      <td>male</td>
      <td>26.5</td>
      <td>0</td>
      <td>0</td>
      <td>2656</td>
      <td>7.2250</td>
      <td>NaN</td>
      <td>C</td>
      <td>NaN</td>
      <td>304.0</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1307</th>
      <td>3</td>
      <td>0</td>
      <td>Zakarian, Mr. Ortin</td>
      <td>male</td>
      <td>27.0</td>
      <td>0</td>
      <td>0</td>
      <td>2670</td>
      <td>7.2250</td>
      <td>NaN</td>
      <td>C</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1308</th>
      <td>3</td>
      <td>0</td>
      <td>Zimmerman, Mr. Leo</td>
      <td>male</td>
      <td>29.0</td>
      <td>0</td>
      <td>0</td>
      <td>315082</td>
      <td>7.8750</td>
      <td>NaN</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<p>Cette base contient 1309 observations (ici des passagers) et 14 variables qui permet de les caract√©riser. Voyons comment s√©lectionner des sous-ensembles de ces donn√©es.    </p>
<blockquote>
<p>üëã Nous c'est Antoine et Louis de Statoscop, une coop√©rative de statisticiens / data scientists.
Vous voulez en savoir plus sur ce que l'on fait?</p>
</blockquote>
<div class = "d-flex justify-content-center mt-4">
   <a href="https://statoscop.fr" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button">Visiter notre site</a>
   <a href="https://statoscop.fr/contact" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button">Nous contacter</a>
</div>
<p><br>  </p>
<h1 id="filtrer-des-observations">Filtrer des observations</h1>
<p>On s'int√©resse tout d'abord √† la s√©lection sur les lignes. Diff√©rentes options sont possibles :  </p>
<h2 id="a-partir-de-leur-position-avec-iloc">√Ä partir de leur position  avec <code>iloc</code></h2>
<p>Dans <code>pandas</code>, il est possible de s√©lectionner certaines lignes directement en renseignant leur position avec la syntaxe <code>data_frame.iloc[positions_lignes, positions_colonnes]</code>. En ayant bien en t√™te qu'en Python, la premi√®re observation correspond √† la position 0, on peut par exemple s√©lectionner les lignes 1 √† 3 :   </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]</span> 
<span class="c1"># &quot;0:3&quot; lignes de la position 0 √† la position 3 exclue</span>
<span class="c1"># &quot;:&quot; pour s√©lectionner l&#39;ensemble des colonnes</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>Allen, Miss. Elisabeth Walton</td>
      <td>female</td>
      <td>29.0000</td>
      <td>0</td>
      <td>0</td>
      <td>24160</td>
      <td>211.3375</td>
      <td>B5</td>
      <td>S</td>
      <td>2</td>
      <td>NaN</td>
      <td>St Louis, MO</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>Allison, Master. Hudson Trevor</td>
      <td>male</td>
      <td>0.9167</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>11</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0</td>
      <td>Allison, Miss. Helen Loraine</td>
      <td>female</td>
      <td>2.0000</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
  </tbody>
</table>
</div>

<p>On note que l'√©criture <code>a:b</code> s√©lectionne les lignes de la position <code>a</code> <strong>inclue</strong> √† la position <code>b</code> <strong>exclue</strong>. Les index n√©gatifs partent de la fin de la base, ainsi l'index <code>-1</code> correspond √† la derni√®re observation. Il est possible aussi de renseigner les positions souhait√©es dans une liste, ou de faire des combinaisons plus complexes en utilisant <code>range</code> et la concat√©nation de listes avec <code>+</code>, ci-dessous les lignes 1 √† 2, 10 √† 12 et l'avant-derni√®re √† la derni√®re  :  </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="mi">9</span><span class="p">,</span> <span class="mi">12</span><span class="p">))</span> <span class="o">+</span> <span class="nb">list</span><span class="p">(</span><span class="nb">range</span><span class="p">(</span><span class="o">-</span><span class="mi">2</span><span class="p">,</span> <span class="mi">0</span><span class="p">)),</span> <span class="p">:]</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>Allen, Miss. Elisabeth Walton</td>
      <td>female</td>
      <td>29.0000</td>
      <td>0</td>
      <td>0</td>
      <td>24160</td>
      <td>211.3375</td>
      <td>B5</td>
      <td>S</td>
      <td>2</td>
      <td>NaN</td>
      <td>St Louis, MO</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>Allison, Master. Hudson Trevor</td>
      <td>male</td>
      <td>0.9167</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>11</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>9</th>
      <td>1</td>
      <td>0</td>
      <td>Artagaveytia, Mr. Ramon</td>
      <td>male</td>
      <td>71.0000</td>
      <td>0</td>
      <td>0</td>
      <td>PC 17609</td>
      <td>49.5042</td>
      <td>NaN</td>
      <td>C</td>
      <td>NaN</td>
      <td>22.0</td>
      <td>Montevideo, Uruguay</td>
    </tr>
    <tr>
      <th>10</th>
      <td>1</td>
      <td>0</td>
      <td>Astor, Col. John Jacob</td>
      <td>male</td>
      <td>47.0000</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17757</td>
      <td>227.5250</td>
      <td>C62 C64</td>
      <td>C</td>
      <td>NaN</td>
      <td>124.0</td>
      <td>New York, NY</td>
    </tr>
    <tr>
      <th>11</th>
      <td>1</td>
      <td>1</td>
      <td>Astor, Mrs. John Jacob (Madeleine Talmadge Force)</td>
      <td>female</td>
      <td>18.0000</td>
      <td>1</td>
      <td>0</td>
      <td>PC 17757</td>
      <td>227.5250</td>
      <td>C62 C64</td>
      <td>C</td>
      <td>4</td>
      <td>NaN</td>
      <td>New York, NY</td>
    </tr>
    <tr>
      <th>1307</th>
      <td>3</td>
      <td>0</td>
      <td>Zakarian, Mr. Ortin</td>
      <td>male</td>
      <td>27.0000</td>
      <td>0</td>
      <td>0</td>
      <td>2670</td>
      <td>7.2250</td>
      <td>NaN</td>
      <td>C</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>1308</th>
      <td>3</td>
      <td>0</td>
      <td>Zimmerman, Mr. Leo</td>
      <td>male</td>
      <td>29.0000</td>
      <td>0</td>
      <td>0</td>
      <td>315082</td>
      <td>7.8750</td>
      <td>NaN</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<p>Vous aurez peut-√™tre remarqu√© qu'il est aussi possible de filtrer sur les observations avec <code>.loc</code> en renseignant leur position. C'est en fait d√ª au fait que par d√©faut, l'index des lignes correspond √† leur position. Mais si vous voulez filtrer en fonction de la <strong>position</strong> des lignes, il est pr√©f√©rable d'utiliser <code>iloc</code>. √Ä noter aussi que la syntaxe <code>a:b</code> dans le cas o√π vous utilisez <code>.loc</code> <strong>inclue l'√©l√©ment √† la position <code>b</code></strong> : </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="p">:]</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>Allen, Miss. Elisabeth Walton</td>
      <td>female</td>
      <td>29.0000</td>
      <td>0</td>
      <td>0</td>
      <td>24160</td>
      <td>211.3375</td>
      <td>B5</td>
      <td>S</td>
      <td>2</td>
      <td>NaN</td>
      <td>St Louis, MO</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>Allison, Master. Hudson Trevor</td>
      <td>male</td>
      <td>0.9167</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>11</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0</td>
      <td>Allison, Miss. Helen Loraine</td>
      <td>female</td>
      <td>2.0000</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>0</td>
      <td>Allison, Mr. Hudson Joshua Creighton</td>
      <td>male</td>
      <td>30.0000</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>NaN</td>
      <td>135.0</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
  </tbody>
</table>
</div>

<p>Si le dataframe avait eu un autre index que celui de la position par d√©faut, cette syntaxe n'aurait fonctionn√© qu'avec <code>iloc</code>:  </p>
<div class="highlight"><pre><span></span><code><span class="c1"># on cr√©e un index correspondant au nom des passagers</span>
<span class="n">titanic_index_name</span> <span class="o">=</span> <span class="n">titanic</span><span class="o">.</span><span class="n">set_index</span><span class="p">(</span><span class="s2">&quot;name&quot;</span><span class="p">)</span>

<span class="c1"># titanic_index_name.loc[0:3, :] renvoie une erreur</span>
<span class="n">titanic_index_name</span><span class="o">.</span><span class="n">iloc</span><span class="p">[</span><span class="mi">0</span><span class="p">:</span><span class="mi">3</span><span class="p">,</span> <span class="p">]</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
    <tr>
      <th>name</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Allen, Miss. Elisabeth Walton</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>29.0000</td>
      <td>0</td>
      <td>0</td>
      <td>24160</td>
      <td>211.3375</td>
      <td>B5</td>
      <td>S</td>
      <td>2</td>
      <td>NaN</td>
      <td>St Louis, MO</td>
    </tr>
    <tr>
      <th>Allison, Master. Hudson Trevor</th>
      <td>1</td>
      <td>1</td>
      <td>male</td>
      <td>0.9167</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>11</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>Allison, Miss. Helen Loraine</th>
      <td>1</td>
      <td>0</td>
      <td>female</td>
      <td>2.0000</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
  </tbody>
</table>
</div>

<h2 id="a-partir-de-leur-index-avec-loc">√Ä partir de leur index avec <code>loc</code></h2>
<p>Cette derni√®re remarque nous am√®ne tout naturellement vers la seconde mani√®re de filtrer les observations : √† partir de leur index. En effet, il est possible avec <code>pandas</code> de cr√©er un index qui permet de s√©lectionner des lignes en fonction de leur label. Ici nous avons cr√©√© le dataframe <code>titanic_index_name</code> qui identifie chaque ligne avec le nom du passager √† laquelle elle correspond. On peut alors s√©lectionner une ou plusieurs lignes en utilisant ces labels, que l'on renseigne dans une liste :  </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic_index_name</span><span class="o">.</span><span class="n">index</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="nx">Index</span><span class="p">([</span><span class="err">&#39;</span><span class="nx">Allen</span><span class="p">,</span><span class="w"> </span><span class="nx">Miss</span><span class="p">.</span><span class="w"> </span><span class="nx">Elisabeth</span><span class="w"> </span><span class="nx">Walton</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">Allison</span><span class="p">,</span><span class="w"> </span><span class="nx">Master</span><span class="p">.</span><span class="w"> </span><span class="nx">Hudson</span><span class="w"> </span><span class="nx">Trevor</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Allison</span><span class="p">,</span><span class="w"> </span><span class="nx">Miss</span><span class="p">.</span><span class="w"> </span><span class="nx">Helen</span><span class="w"> </span><span class="nx">Loraine</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">Allison</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Hudson</span><span class="w"> </span><span class="nx">Joshua</span><span class="w"> </span><span class="nx">Creighton</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Allison</span><span class="p">,</span><span class="w"> </span><span class="nx">Mrs</span><span class="p">.</span><span class="w"> </span><span class="nx">Hudson</span><span class="w"> </span><span class="nx">J</span><span class="w"> </span><span class="nx">C</span><span class="w"> </span><span class="p">(</span><span class="nx">Bessie</span><span class="w"> </span><span class="nx">Waldo</span><span class="w"> </span><span class="nx">Daniels</span><span class="p">)</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Anderson</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Harry</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">Andrews</span><span class="p">,</span><span class="w"> </span><span class="nx">Miss</span><span class="p">.</span><span class="w"> </span><span class="nx">Kornelia</span><span class="w"> </span><span class="nx">Theodosia</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Andrews</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Thomas</span><span class="w"> </span><span class="nx">Jr</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Appleton</span><span class="p">,</span><span class="w"> </span><span class="nx">Mrs</span><span class="p">.</span><span class="w"> </span><span class="nx">Edward</span><span class="w"> </span><span class="nx">Dale</span><span class="w"> </span><span class="p">(</span><span class="nx">Charlotte</span><span class="w"> </span><span class="nx">Lamson</span><span class="p">)</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Artagaveytia</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Ramon</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="o">...</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Yasbeck</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Antoni</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">Yasbeck</span><span class="p">,</span><span class="w"> </span><span class="nx">Mrs</span><span class="p">.</span><span class="w"> </span><span class="nx">Antoni</span><span class="w"> </span><span class="p">(</span><span class="nx">Selini</span><span class="w"> </span><span class="nx">Alexander</span><span class="p">)</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Youseff</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Gerious</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">Yousif</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Wazli</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">Yousseff</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Gerious</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Zabour</span><span class="p">,</span><span class="w"> </span><span class="nx">Miss</span><span class="p">.</span><span class="w"> </span><span class="nx">Hileni</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">Zabour</span><span class="p">,</span><span class="w"> </span><span class="nx">Miss</span><span class="p">.</span><span class="w"> </span><span class="nx">Thamine</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Zakarian</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Mapriededer</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">Zakarian</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Ortin</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">       </span><span class="err">&#39;</span><span class="nx">Zimmerman</span><span class="p">,</span><span class="w"> </span><span class="nx">Mr</span><span class="p">.</span><span class="w"> </span><span class="nx">Leo</span><span class="err">&#39;</span><span class="p">],</span>
<span class="w">      </span><span class="nx">dtype</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">object</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">name</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">name</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="nx">length</span><span class="p">=</span><span class="mi">1309</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="c1"># Une ligne : </span>
<span class="n">titanic_index_name</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;Allen, Miss. Elisabeth Walton&quot;</span><span class="p">,</span> <span class="p">:]</span>

<span class="c1"># Plusieurs lignes :  les index de la famille Allen</span>
<span class="n">liste_allen</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">titanic_index_name</span><span class="o">.</span><span class="n">index</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;Allen&quot;</span><span class="p">)]</span>
<span class="n">titanic_index_name</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">liste_allen</span><span class="p">,</span> <span class="p">:]</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
    <tr>
      <th>name</th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
      <th></th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>Allen, Miss. Elisabeth Walton</th>
      <td>1</td>
      <td>1</td>
      <td>female</td>
      <td>29.0</td>
      <td>0</td>
      <td>0</td>
      <td>24160</td>
      <td>211.3375</td>
      <td>B5</td>
      <td>S</td>
      <td>2</td>
      <td>NaN</td>
      <td>St Louis, MO</td>
    </tr>
    <tr>
      <th>Allen, Mr. William Henry</th>
      <td>3</td>
      <td>0</td>
      <td>male</td>
      <td>35.0</td>
      <td>0</td>
      <td>0</td>
      <td>373450</td>
      <td>8.0500</td>
      <td>NaN</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Lower Clapton, Middlesex or Erdington, Birmingham</td>
    </tr>
  </tbody>
</table>
</div>

<p>√Ä noter que si vous s√©lectionnez une seule ligne, renseigner le label correspondant directement dans une cha√Æne de caract√®res vous renverra une <code>Serie</code>, soit un vecteur de valeurs pour <code>pandas</code> alors que le renseigner dans une liste vous renverra un <code>DataFrame</code> avec une seule ligne :  </p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">titanic_index_name</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="s2">&quot;Allen, Miss. Elisabeth Walton&quot;</span><span class="p">,</span> <span class="p">:]),</span>
      <span class="nb">type</span><span class="p">(</span><span class="n">titanic_index_name</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="s2">&quot;Allen, Miss. Elisabeth Walton&quot;</span><span class="p">],</span> <span class="p">:]))</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>&lt;class &#39;pandas.core.series.Series&#39;&gt; &lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
</code></pre></div>

<h2 id="a-partir-de-conditions-avec-loc-et">√Ä partir de conditions avec <code>loc</code> et <code>[]</code></h2>
<p>Enfin, et c'est sans doute le cas qui est le plus utilis√© dans la pratique, on peut filtrer sur les observations √† partir d'une condition. L'id√©e est de garder seulement les lignes correspondant √† la condition. <br>
Imaginons par exemple qu'on veuille le tableau contenant uniquement les passag√®res. La condition <code>titanic.sex == "female"</code> va renvoyer un vecteur de bool√©ens de la taille du nombre de lignes de <code>titanic</code> renseignant <code>True</code> ou <code>False</code> en fonction de si la ligne correspond √† un passager ou une passag√®re :  </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic</span><span class="o">.</span><span class="n">sex</span> <span class="o">==</span> <span class="s2">&quot;female&quot;</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mf">0</span><span class="w">        </span><span class="n">True</span>
<span class="mf">1</span><span class="w">       </span><span class="n">False</span>
<span class="mf">2</span><span class="w">        </span><span class="n">True</span>
<span class="mf">3</span><span class="w">       </span><span class="n">False</span>
<span class="mf">4</span><span class="w">        </span><span class="n">True</span>
<span class="w">        </span><span class="mf">...</span><span class="w">  </span>
<span class="mf">1304</span><span class="w">     </span><span class="n">True</span>
<span class="mf">1305</span><span class="w">     </span><span class="n">True</span>
<span class="mf">1306</span><span class="w">    </span><span class="n">False</span>
<span class="mf">1307</span><span class="w">    </span><span class="n">False</span>
<span class="mf">1308</span><span class="w">    </span><span class="n">False</span>
<span class="n">Name</span><span class="p">:</span><span class="w"> </span><span class="n">sex</span><span class="p">,</span><span class="w"> </span><span class="nb">Len</span><span class="n">gth</span><span class="p">:</span><span class="w"> </span><span class="mf">1309</span><span class="p">,</span><span class="w"> </span><span class="n">dtype</span><span class="p">:</span><span class="w"> </span><span class="n">bool</span>
</code></pre></div>

<p>On peut utiliser cette condition pour s√©lectionner un sous-ensemble du dataframe original avec <code>.loc</code> ou directement avec la syntaxe <code>data[condition]</code>.<br>
<strong>Attention :</strong> Si vous souhaitez cr√©er un nouveau dataframe correspondant √† ce sous-ensemble, pensez √† utiliser la m√©thode <code>.copy()</code>, sinon vous aurez le warning <em>SettingWithCopyWarning: A value is trying to be set on a copy of a slice from a DataFrame</em> lorsque vous modifierez ce nouveau dataframe. C'est d√ª au fait que ces modifications affectent √©galement le dataframe original si une copie n'a pas √©t√© cr√©√©e.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># avec .loc</span>
<span class="n">titanic_femmes_loc</span> <span class="o">=</span> <span class="n">titanic</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">titanic</span><span class="o">.</span><span class="n">sex</span> <span class="o">==</span> <span class="s2">&quot;female&quot;</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="c1"># avec []</span>
<span class="n">titanic_femmes_croch</span> <span class="o">=</span> <span class="n">titanic</span><span class="p">[</span><span class="n">titanic</span><span class="o">.</span><span class="n">sex</span> <span class="o">==</span> <span class="s2">&quot;female&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># On teste qu&#39;on a bien le m√™me dataframe et on affiche les 1eres lignes</span>
<span class="nb">print</span><span class="p">(</span><span class="n">titanic_femmes_loc</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">titanic_femmes_croch</span><span class="p">))</span>
<span class="n">titanic_femmes_loc</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>True
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>Allen, Miss. Elisabeth Walton</td>
      <td>female</td>
      <td>29.0</td>
      <td>0</td>
      <td>0</td>
      <td>24160</td>
      <td>211.3375</td>
      <td>B5</td>
      <td>S</td>
      <td>2</td>
      <td>NaN</td>
      <td>St Louis, MO</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0</td>
      <td>Allison, Miss. Helen Loraine</td>
      <td>female</td>
      <td>2.0</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0</td>
      <td>Allison, Mrs. Hudson J C (Bessie Waldo Daniels)</td>
      <td>female</td>
      <td>25.0</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>6</th>
      <td>1</td>
      <td>1</td>
      <td>Andrews, Miss. Kornelia Theodosia</td>
      <td>female</td>
      <td>63.0</td>
      <td>1</td>
      <td>0</td>
      <td>13502</td>
      <td>77.9583</td>
      <td>D7</td>
      <td>S</td>
      <td>10</td>
      <td>NaN</td>
      <td>Hudson, NY</td>
    </tr>
  </tbody>
</table>
</div>

<p>Il est bien s√ªr possible de faire des conditions plus complexes avec les op√©rateurs <code>&amp;</code> (op√©rateur logique "ET") et <code>|</code> (op√©rateur logique "OU"), par exemple les femmes de plus de 60 ans :  </p>
<div class="highlight"><pre><span></span><code><span class="n">my_cond</span> <span class="o">=</span> <span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">sex</span> <span class="o">==</span> <span class="s2">&quot;female&quot;</span><span class="p">)</span> <span class="o">&amp;</span> <span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">age</span> <span class="o">&gt;=</span> <span class="mi">60</span><span class="p">)</span>
<span class="n">titanic</span><span class="o">.</span><span class="n">loc</span><span class="p">[</span><span class="n">my_cond</span><span class="p">,</span> <span class="p">:]</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>6</th>
      <td>1</td>
      <td>1</td>
      <td>Andrews, Miss. Kornelia Theodosia</td>
      <td>female</td>
      <td>63.0</td>
      <td>1</td>
      <td>0</td>
      <td>13502</td>
      <td>77.9583</td>
      <td>D7</td>
      <td>S</td>
      <td>10</td>
      <td>NaN</td>
      <td>Hudson, NY</td>
    </tr>
    <tr>
      <th>43</th>
      <td>1</td>
      <td>1</td>
      <td>Bucknell, Mrs. William Robert (Emma Eliza Ward)</td>
      <td>female</td>
      <td>60.0</td>
      <td>0</td>
      <td>0</td>
      <td>11813</td>
      <td>76.2917</td>
      <td>D15</td>
      <td>C</td>
      <td>8</td>
      <td>NaN</td>
      <td>Philadelphia, PA</td>
    </tr>
    <tr>
      <th>61</th>
      <td>1</td>
      <td>1</td>
      <td>Cavendish, Mrs. Tyrell William (Julia Florence...</td>
      <td>female</td>
      <td>76.0</td>
      <td>1</td>
      <td>0</td>
      <td>19877</td>
      <td>78.8500</td>
      <td>C46</td>
      <td>S</td>
      <td>6</td>
      <td>NaN</td>
      <td>Little Onn Hall, Staffs</td>
    </tr>
    <tr>
      <th>78</th>
      <td>1</td>
      <td>1</td>
      <td>Compton, Mrs. Alexander Taylor (Mary Eliza Ing...</td>
      <td>female</td>
      <td>64.0</td>
      <td>0</td>
      <td>2</td>
      <td>PC 17756</td>
      <td>83.1583</td>
      <td>E45</td>
      <td>C</td>
      <td>14</td>
      <td>NaN</td>
      <td>Lakewood, NJ</td>
    </tr>
  </tbody>
</table>
</div>

<h1 id="selectionner-des-variables">S√©lectionner des variables</h1>
<h2 id="a-partir-de-leur-position-avec-iloc_1">√Ä partir de leur position avec <code>iloc</code></h2>
<p>De mani√®re compl√®tement analogue √† ce que l'on faisait avec les lignes, il est possible de s√©lectionner certaines variables en indiquant dans <code>iloc</code> une liste de positions, par exemple pour s√©lectionner la premi√®re et la derni√®re colonne :  </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic</span><span class="o">.</span><span class="n">iloc</span><span class="p">[:,</span> <span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="o">-</span><span class="mi">1</span><span class="p">]]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>St Louis, MO</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
  </tbody>
</table>
</div>

<p>√Ä noter que cette notation ne fonctionnera pas ni avec <code>.loc</code>, ni avec <code>[]</code>, qui ont besoin des labels des variables.  </p>
<h2 id="a-partir-de-leur-nom-avec-loc-et">√Ä partir de leur nom avec <code>loc</code> et <code>[]</code></h2>
<p>Tout comme on pouvait filtrer les lignes √† partir de leur label quand on d√©finissait un index, il est possible de s√©lectionner certaines variables en les renseignant dans une liste avec <code>.loc</code> et <code>[]</code> :  </p>
<div class="highlight"><pre><span></span><code><span class="c1"># avec .loc</span>
<span class="n">titanic_select_loc</span> <span class="o">=</span> <span class="n">titanic</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;pclass&quot;</span><span class="p">,</span> <span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="c1"># avec []</span>
<span class="n">titanic_select_croch</span> <span class="o">=</span> <span class="n">titanic</span><span class="p">[[</span><span class="s2">&quot;pclass&quot;</span><span class="p">,</span> <span class="s2">&quot;sex&quot;</span><span class="p">,</span> <span class="s2">&quot;age&quot;</span><span class="p">]]</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>

<span class="nb">print</span><span class="p">(</span><span class="n">titanic_select_loc</span><span class="o">.</span><span class="n">equals</span><span class="p">(</span><span class="n">titanic_select_croch</span><span class="p">))</span>
<span class="n">titanic_select_loc</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">4</span><span class="p">)</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>True
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>sex</th>
      <th>age</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>female</td>
      <td>29.0000</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>male</td>
      <td>0.9167</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>female</td>
      <td>2.0000</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>male</td>
      <td>30.0000</td>
    </tr>
  </tbody>
</table>
</div>

<p>Notons qu'avec <code>loc</code> on peut √©galement utiliser la syntaxe <code>"label1" : "labeln"</code> pour s√©lectionner toutes les colonnes se situant entre deux colonnes inclues :  </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;pclass&quot;</span><span class="p">:</span><span class="s2">&quot;sex&quot;</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>Allen, Miss. Elisabeth Walton</td>
      <td>female</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>Allison, Master. Hudson Trevor</td>
      <td>male</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0</td>
      <td>Allison, Miss. Helen Loraine</td>
      <td>female</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>0</td>
      <td>Allison, Mr. Hudson Joshua Creighton</td>
      <td>male</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0</td>
      <td>Allison, Mrs. Hudson J C (Bessie Waldo Daniels)</td>
      <td>female</td>
    </tr>
  </tbody>
</table>
</div>

<p>Enfin, de la m√™me mani√®re qu'avec les lignes, s√©lectionner une seule colonne en renseignant son label directement ou dans une liste renverra une <code>Serie</code> ou un <code>DataFrame</code> :  </p>
<div class="highlight"><pre><span></span><code><span class="nb">print</span><span class="p">(</span><span class="nb">type</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="s2">&quot;pclass&quot;</span><span class="p">]),</span> <span class="nb">type</span><span class="p">(</span><span class="n">titanic</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="p">[</span><span class="s2">&quot;pclass&quot;</span><span class="p">]]))</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>&lt;class &#39;pandas.core.series.Series&#39;&gt; &lt;class &#39;pandas.core.frame.DataFrame&#39;&gt;
</code></pre></div>

<h2 id="a-partir-de-conditions-avec-loc">√Ä partir de conditions avec <code>loc</code></h2>
<p>Enfin, il est possible de s√©lectionner certaines colonnes en fonction de conditions, repr√©sent√©es par un vecteur de bool√©ens. En g√©n√©ral, on va cr√©er ce vecteur en s'appuyant sur les m√©thodes <code>pandas</code> permettant de caract√©riser les colonnes de notre dataframe, comme <code>.columns</code> et <code>.dtypes</code> :   </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic</span><span class="o">.</span><span class="n">columns</span><span class="p">,</span> <span class="n">titanic</span><span class="o">.</span><span class="n">dtypes</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="p">(</span><span class="nx">Index</span><span class="p">([</span><span class="err">&#39;</span><span class="nx">pclass</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">survived</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">name</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">sex</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">age</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">sibsp</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">parch</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">ticket</span><span class="err">&#39;</span><span class="p">,</span>
<span class="w">        </span><span class="err">&#39;</span><span class="nx">fare</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">cabin</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">embarked</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">boat</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">body</span><span class="err">&#39;</span><span class="p">,</span><span class="w"> </span><span class="err">&#39;</span><span class="nx">home</span><span class="p">.</span><span class="nx">dest</span><span class="err">&#39;</span><span class="p">],</span>
<span class="w">       </span><span class="nx">dtype</span><span class="p">=</span><span class="err">&#39;</span><span class="nx">object</span><span class="err">&#39;</span><span class="p">),</span>
<span class="w"> </span><span class="nx">pclass</span><span class="w">         </span><span class="nx">int64</span>
<span class="w"> </span><span class="nx">survived</span><span class="w">       </span><span class="nx">int64</span>
<span class="w"> </span><span class="nx">name</span><span class="w">          </span><span class="nx">object</span>
<span class="w"> </span><span class="nx">sex</span><span class="w">           </span><span class="nx">object</span>
<span class="w"> </span><span class="nx">age</span><span class="w">          </span><span class="nx">float64</span>
<span class="w"> </span><span class="nx">sibsp</span><span class="w">          </span><span class="nx">int64</span>
<span class="w"> </span><span class="nx">parch</span><span class="w">          </span><span class="nx">int64</span>
<span class="w"> </span><span class="nx">ticket</span><span class="w">        </span><span class="nx">object</span>
<span class="w"> </span><span class="nx">fare</span><span class="w">         </span><span class="nx">float64</span>
<span class="w"> </span><span class="nx">cabin</span><span class="w">         </span><span class="nx">object</span>
<span class="w"> </span><span class="nx">embarked</span><span class="w">      </span><span class="nx">object</span>
<span class="w"> </span><span class="nx">boat</span><span class="w">          </span><span class="nx">object</span>
<span class="w"> </span><span class="nx">body</span><span class="w">         </span><span class="nx">float64</span>
<span class="w"> </span><span class="nx">home</span><span class="p">.</span><span class="nx">dest</span><span class="w">     </span><span class="nx">object</span>
<span class="w"> </span><span class="nx">dtype</span><span class="p">:</span><span class="w"> </span><span class="nx">object</span><span class="p">)</span>
</code></pre></div>

<p>On peut par exemple s√©lectionner les variables renseignant des entiers (<code>cond1</code>), ou celles commen√ßant par la lettre b :  </p>
<div class="highlight"><pre><span></span><code><span class="n">cond1</span> <span class="o">=</span> <span class="n">titanic</span><span class="o">.</span><span class="n">dtypes</span> <span class="o">==</span> <span class="s2">&quot;int64&quot;</span>
<span class="n">titanic</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cond1</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>sibsp</th>
      <th>parch</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>0</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>1</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>2</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>3</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0</td>
      <td>1</td>
      <td>2</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">cond2</span> <span class="o">=</span> <span class="p">[</span><span class="n">i</span> <span class="k">for</span> <span class="n">i</span> <span class="ow">in</span> <span class="n">titanic</span><span class="o">.</span><span class="n">columns</span> <span class="k">if</span> <span class="n">i</span><span class="o">.</span><span class="n">startswith</span><span class="p">(</span><span class="s2">&quot;s&quot;</span><span class="p">)]</span>
<span class="n">titanic</span><span class="o">.</span><span class="n">loc</span><span class="p">[:,</span> <span class="n">cond2</span><span class="p">]</span><span class="o">.</span><span class="n">head</span><span class="p">()</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>survived</th>
      <th>sex</th>
      <th>sibsp</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>female</td>
      <td>0</td>
    </tr>
    <tr>
      <th>1</th>
      <td>1</td>
      <td>male</td>
      <td>1</td>
    </tr>
    <tr>
      <th>2</th>
      <td>0</td>
      <td>female</td>
      <td>1</td>
    </tr>
    <tr>
      <th>3</th>
      <td>0</td>
      <td>male</td>
      <td>1</td>
    </tr>
    <tr>
      <th>4</th>
      <td>0</td>
      <td>female</td>
      <td>1</td>
    </tr>
  </tbody>
</table>
</div>

<h1 id="synthese-jutilise-quoi-du-coup">Synth√®se : j'utilise quoi du coup?</h1>
<h2 id="iloc-ou-loc"><code>iloc</code> ou <code>loc</code> ?</h2>
<p>En r√©sum√©, les syntaxes <code>data.iloc[i, j]</code> et <code>data.loc[i, j]</code> suivent la m√™me logique en permettant dans le m√™me appel de filtrer sur les lignes en i et sur les colonnes en j. Le choix entre <code>iloc</code> et <code>loc</code> est seulement guid√© par le fait que votre s√©lection porte sur :  </p>
<ul>
<li>les <strong>positions des lignes ou des colonnes</strong>. Dans ce cas vous devez utiliser <code>iloc</code>.  </li>
<li>les <strong>noms des colonnes, les index des lignes, ou un vecteur de bool√©ens</strong>. Dans ce cas utilisez <code>loc</code>.  </li>
</ul>
<p>Rappelez vous que s√©lectionner par les positions avec <code>.loc</code> n'est possible que quand les index par d√©faut sont les positions des lignes. Mais cela porte √† confusion. Prenons par exemple notre table tri√©e par √¢ge pour laquelle on n'a pas r√©initialis√© les index :  </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic_sorted</span> <span class="o">=</span> <span class="n">titanic</span><span class="o">.</span><span class="n">sort_values</span><span class="p">(</span><span class="s2">&quot;age&quot;</span><span class="p">)</span><span class="o">.</span><span class="n">copy</span><span class="p">()</span>
<span class="n">titanic_sorted</span><span class="o">.</span><span class="n">head</span><span class="p">(</span><span class="mi">5</span><span class="p">)</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>763</th>
      <td>3</td>
      <td>1</td>
      <td>Dean, Miss. Elizabeth Gladys "Millvina"</td>
      <td>female</td>
      <td>0.1667</td>
      <td>1</td>
      <td>2</td>
      <td>C.A. 2315</td>
      <td>20.5750</td>
      <td>NaN</td>
      <td>S</td>
      <td>10</td>
      <td>NaN</td>
      <td>Devon, England Wichita, KS</td>
    </tr>
    <tr>
      <th>747</th>
      <td>3</td>
      <td>0</td>
      <td>Danbom, Master. Gilbert Sigvard Emanuel</td>
      <td>male</td>
      <td>0.3333</td>
      <td>0</td>
      <td>2</td>
      <td>347080</td>
      <td>14.4000</td>
      <td>NaN</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Stanton, IA</td>
    </tr>
    <tr>
      <th>1240</th>
      <td>3</td>
      <td>1</td>
      <td>Thomas, Master. Assad Alexander</td>
      <td>male</td>
      <td>0.4167</td>
      <td>0</td>
      <td>1</td>
      <td>2625</td>
      <td>8.5167</td>
      <td>NaN</td>
      <td>C</td>
      <td>16</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
    <tr>
      <th>427</th>
      <td>2</td>
      <td>1</td>
      <td>Hamalainen, Master. Viljo</td>
      <td>male</td>
      <td>0.6667</td>
      <td>1</td>
      <td>1</td>
      <td>250649</td>
      <td>14.5000</td>
      <td>NaN</td>
      <td>S</td>
      <td>4</td>
      <td>NaN</td>
      <td>Detroit, MI</td>
    </tr>
    <tr>
      <th>1111</th>
      <td>3</td>
      <td>0</td>
      <td>Peacock, Master. Alfred Edward</td>
      <td>male</td>
      <td>0.7500</td>
      <td>1</td>
      <td>1</td>
      <td>SOTON/O.Q. 3101315</td>
      <td>13.7750</td>
      <td>NaN</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<p>Si l'on veut la premi√®re et la 5e ligne de ce nouveau dataframe, il faut bien utiliser <code>iloc</code> et non <code>loc</code> qui renverra les index 0 et 5 de l'ancien dataframe <code>titanic</code> :  </p>
<div class="highlight"><pre><span></span><code><span class="n">titanic_sorted</span><span class="o">.</span><span class="n">iloc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">:]</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>763</th>
      <td>3</td>
      <td>1</td>
      <td>Dean, Miss. Elizabeth Gladys "Millvina"</td>
      <td>female</td>
      <td>0.1667</td>
      <td>1</td>
      <td>2</td>
      <td>C.A. 2315</td>
      <td>20.575</td>
      <td>NaN</td>
      <td>S</td>
      <td>10</td>
      <td>NaN</td>
      <td>Devon, England Wichita, KS</td>
    </tr>
    <tr>
      <th>1111</th>
      <td>3</td>
      <td>0</td>
      <td>Peacock, Master. Alfred Edward</td>
      <td>male</td>
      <td>0.7500</td>
      <td>1</td>
      <td>1</td>
      <td>SOTON/O.Q. 3101315</td>
      <td>13.775</td>
      <td>NaN</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>NaN</td>
    </tr>
  </tbody>
</table>
</div>

<div class="highlight"><pre><span></span><code><span class="n">titanic_sorted</span><span class="o">.</span><span class="n">loc</span><span class="p">[[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">4</span><span class="p">],</span> <span class="p">:]</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>pclass</th>
      <th>survived</th>
      <th>name</th>
      <th>sex</th>
      <th>age</th>
      <th>sibsp</th>
      <th>parch</th>
      <th>ticket</th>
      <th>fare</th>
      <th>cabin</th>
      <th>embarked</th>
      <th>boat</th>
      <th>body</th>
      <th>home.dest</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>1</td>
      <td>1</td>
      <td>Allen, Miss. Elisabeth Walton</td>
      <td>female</td>
      <td>29.0</td>
      <td>0</td>
      <td>0</td>
      <td>24160</td>
      <td>211.3375</td>
      <td>B5</td>
      <td>S</td>
      <td>2</td>
      <td>NaN</td>
      <td>St Louis, MO</td>
    </tr>
    <tr>
      <th>4</th>
      <td>1</td>
      <td>0</td>
      <td>Allison, Mrs. Hudson J C (Bessie Waldo Daniels)</td>
      <td>female</td>
      <td>25.0</td>
      <td>1</td>
      <td>2</td>
      <td>113781</td>
      <td>151.5500</td>
      <td>C22 C26</td>
      <td>S</td>
      <td>NaN</td>
      <td>NaN</td>
      <td>Montreal, PQ / Chesterville, ON</td>
    </tr>
  </tbody>
</table>
</div>

<p>On aurait aussi pu utiliser le param√®tre <code>ignore_index</code> dans <code>sort_values()</code> pour r√©initialiser directement les index.  </p>
<h2 id="ou-loc"><code>[]</code> ou <code>loc</code>?</h2>
<p>Les crochets n'explicitent pas autant s'ils s√©lectionnent sur des lignes ou des colonnes. Si vous renseignez une liste de labels ils vont s√©lectionner des colonnes, et si vous renseignez une liste de bool√©ens ils vont filtrer sur les lignes. Il est possible de cha√Æner les op√©rations sur les lignes ou les colonnes. Ainsi : <code>titanic[titanic.sex == "female"]["name"]</code> donnera le m√™me r√©sultat que <code>titanic.loc[titanic.sex == "female", "name"]</code>, c'est √† dire les noms (colonne "name") des passag√®res (lignes correspondant aux femmes). 
Il vous revient donc de choisir ce qui vous convient le mieux. Dans le cas o√π on s√©lectionne √† la fois sur les lignes et les colonnes, la syntaxe de <code>loc</code> a l'avantage d'√™tre plus lisible. Dans le cas o√π on s√©lectionne seulement des colonnes ou seulement des lignes, l'usage des crochets permettra de taper les instructions l√©g√®rement plus rapidement. Enfin quand on veut extraire une s√©rie d'un dataframe, on utilisera avantageusement la syntaxe <code>data.nom_col</code>, √©quivalente √† <code>data["nom_col"]</code>.  </p>
<p>C'est la fin de cet article! N'h√©sitez pas √† <a href="https://www.statoscop.fr">visiter notre site</a> et √† nous suivre sur <a href="https://twitter.com/stato_scop">Twitter</a> et <a href="https://www.linkedin.com/company/statoscop">Linkedin</a>. Pour retrouver l'ensemble du code ayant servi √† g√©n√©rer cette note, vous pouvez vous rendre sur le <a href="https://github.com/Statoscop/notebooks-blog">github de Statoscop</a>.  </p>
<div class = "d-flex justify-content-center mt-4">
   <a href="https://statoscop.fr" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button">Visiter notre site</a>
   <a href="https://statoscop.fr/contact" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button">Nous contacter</a>
</div>
<p><br>  </p>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Manipulation de donn√©es avec pandas&amp;url=https://blog.statoscop.fr/manip-donnees-pandas.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="https://blog.statoscop.fr/tag/python.html">Python</a><a href="https://blog.statoscop.fr/tag/statistiques.html">Statistiques</a><a href="https://blog.statoscop.fr/tag/data-science.html">Data Science</a><a href="https://blog.statoscop.fr/tag/index.html">index</a><a href="https://blog.statoscop.fr/tag/loc.html">loc</a><a href="https://blog.statoscop.fr/tag/iloc.html">iloc</a><a href="https://blog.statoscop.fr/tag/colonnes.html">colonnes</a><a href="https://blog.statoscop.fr/tag/lignes.html">lignes</a>                </aside>

                <div class="clear"></div>


                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
    
    <!-- Footer-->
    <footer class="footer py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-4 text-lg-left"> ¬© Statoscop</div>
                <div class="col-lg-4 my-3 my-lg-0">
                    <a class="btn btn-dark btn-social mx-2" href="https://twitter.com/stato_scop" target="_blank"><i class="fab fa-twitter"></i></a>
                </div>
                <div class="col-lg-4 text-lg-left"> 
                    Blog publi√© avec <a class="js-scroll-trigger text-info" href="https://docs.getpelican.com/en/latest/"  target="_blank">Pelican</a> et
                     d√©ploy√© sur <a class="js-scroll-trigger text-info" href="https://pages.github.com/"  target="_blank">Github Pages</a>.
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap core JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
    <!-- Third party plugin JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <script type="text/javascript" src="https://blog.statoscop.fr/themes/statoscop/static/js/script.js"></script>

  </body>
</html>