<!DOCTYPE html>
<html lang="fr">

<head>
<title>Analyse en composantes principales avec Python</title>    <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
  <meta name="description" content="Statisticiens √† Toulouse et Bayonne organis√©s en coop√©rative pour vous accompagner dans l'analyse de vos donn√©es" />
  <meta name="author" content="" />

  <!-- Font Awesome icons (free version)-->
  <script src="https://use.fontawesome.com/releases/v5.13.0/js/all.js" crossorigin="anonymous"></script>
  <!-- Google fonts-->
  <link href="https://fonts.googleapis.com/css?family=Montserrat:400,700" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Droid+Serif:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
  <link href="https://fonts.googleapis.com/css?family=Roboto+Slab:400,100,300,700" rel="stylesheet" type="text/css" />



  <!-- <title>Le blog de Statoscop - √©tudes de cas en R et Python</title> -->
  <link rel="icon" type="image/x-icon" href="https://blog.statoscop.fr/themes/statoscop/static/images/favicon-v1.ico" />


  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="referrer" content="origin" />
  <meta name="generator" content="Pelican" />
<link href="https://blog.statoscop.fr/acp-python.html" rel="canonical" />
  <!-- Feed -->
        <link href="https://blog.statoscop.fr/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Le blog Full Atom Feed" />
          <link href="https://blog.statoscop.fr/feeds/{slug}.atom.xml" type="application/atom+xml" rel="alternate" title="Le blog Categories Atom Feed" />

  <!-- <link href="https://blog.statoscop.fr/themes/statoscop/static/css/style.css" type="text/css" rel="stylesheet" />-->
  <link href="https://blog.statoscop.fr/themes/statoscop/static/css/style-site.css" type="text/css" rel="stylesheet" /> 
  <!-- <link href="https://blog.statoscop.fr/themes/statoscop/static/css/style_fusion.css" type="text/css" rel="stylesheet" /> -->
  <!-- Code highlight color scheme -->
      <link href="https://blog.statoscop.fr/themes/statoscop/static/css/code_blocks/github.css" rel="stylesheet">

  <!-- Custom fonts -->
  <link href='https://fonts.googleapis.com/css?family=Montserrat:400,300' rel='stylesheet' type='text/css' />
  <link href="https://fonts.googleapis.com/css?family=Lato" rel="stylesheet" type="text/css" />

  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!-- [if lt IE 9]>
    <script src="https://oss.maxcdn.com/libs/html5shiv/3.7.0/html5shiv.js"></script>
    <script src="https://oss.maxcdn.com/libs/respond.js/1.4.2/respond.min.js"></script>
  ![endif] -->



    <meta name="description" content="Pr√©sentation et exemples d'utilisation de l'ACP en statistiques et data science.">

    <meta name="author" content="Antoine">

    <meta name="tags" content="Python">
    <meta name="tags" content="Machine Learning">
    <meta name="tags" content="Statistiques">
    <meta name="tags" content="Data Science">




<!-- Open Graph -->
<meta property="og:site_name" content="Le blog"/>
<meta property="og:title" content="Analyse en composantes principales avec Python"/>
<meta property="og:description" content="Pr√©sentation et exemples d'utilisation de l'ACP en statistiques et data science."/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://blog.statoscop.fr/acp-python.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2021-04-16 00:00:00+02:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://blog.statoscop.fr/author/antoine.html">
<meta property="article:section" content="Python"/>
<meta property="article:tag" content="Python"/>
<meta property="article:tag" content="Machine Learning"/>
<meta property="article:tag" content="Statistiques"/>
<meta property="article:tag" content="Data Science"/>
<meta property="og:image" content="https://blog.statoscop.fr/images/cover_2.png">

<!-- Twitter Card -->

<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Article",
  "name": "Analyse en composantes principales avec Python",
  "headline": "Analyse en composantes principales avec Python",
  "datePublished": "2021-04-16 00:00:00+02:00",
  "dateModified": "",
  "author": {
    "@type": "Person",
    "name": "Antoine",
    "url": "https://blog.statoscop.fr/author/antoine.html"
  },
  "image": "https://blog.statoscop.fr/images/cover_2.png",
  "url": "https://blog.statoscop.fr/acp-python.html",
  "description": "Pr√©sentation et exemples d'utilisation de l'ACP en statistiques et data science."
}
</script>
  <!-- Matomo -->
  <script>
    var _paq = window._paq = window._paq || [];
    /* tracker methods like "setCustomDimension" should be called before "trackPageView" */
    _paq.push(['trackPageView']);
    _paq.push(['enableLinkTracking']);
    (function() {
      var u="//matomo.statoscop.fr/matomo/";
      _paq.push(['setTrackerUrl', u+'matomo.php']);
      _paq.push(['setSiteId', '1']);
      var d=document, g=d.createElement('script'), s=d.getElementsByTagName('script')[0];
      g.async=true; g.src=u+'matomo.js'; s.parentNode.insertBefore(g,s);
    })();
  </script>
  <!-- End Matomo Code -->

  

</head>
<!-- TODO : Body class -->
  <body id="page-top">
    <!-- Navigation-->
    <nav class="navbar navbar-expand-lg navbar-dark fixed-top" id="mainNav">
      <div class="container">

        <a class="navbar-brand" href="https://statoscop.fr"><img src="https://blog.statoscop.fr/themes/statoscop/static/images/logo-statoscop-v1.png" alt="Statoscop.logo"></a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarResponsive" aria-controls="navbarResponsive" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>

        <div class="collapse navbar-collapse" id="navbarResponsive">
          <ul class="navbar-nav text-uppercase ml-auto">
              <li class="nav-item font-weight-bold">
                  <a class="nav-link js-scroll-trigger " href="https://statoscop.fr"> Accueil </a>
              </li>
              <li class="nav-item font-weight-bold">
                  <a class="nav-link js-scroll-trigger " href="https://statoscop.fr/about"> √Ä propos </a>
              </li>
              <li class="nav-item dropdown">
                  <a class="nav-link dropdown-toggle font-weight-bold "
                  id="navbarDropdownMenuLink" aria-haspopup="true" aria-expanded="false"> Prestations </a>
                  <ul class="dropdown-menu" aria-labelledby="navbarDropdownMenuLink">
                      <li><a class="dropdown-item" href="https://statoscop.fr/etudes">Conseils & √©tudes statistiques</a></li>
                      <li><a class="dropdown-item" href="https://statoscop.fr/recodages">Migrations de code & Recodages</a></li>
                      <li><a class="dropdown-item" href="https://statoscop.fr/formations">Formations</a></li>
                      <li><a class="dropdown-item" href="https://statoscop.fr/applis">Dashboards & Applications</a></li>
                  </ul>
              </li>
              <li class="nav-item font-weight-bold">
                  <a class="nav-link js-scroll-trigger " href="https://statoscop.fr/contact">Contact</a>
              </li>
              <li class="nav-item font-weight-bold">
                  <a class="nav-link js-scroll-trigger active" href="https://blog.statoscop.fr/">Le blog</a>
              </li>
          </ul>
      </div>
      </div>
    </nav>
    


    <!-- Post content -->
    <main class="content" role="main">
      
      <div>
      </div>

      <article class="post">
        <div class="inner">




            <section class="post-content">
              <h1 class="post-title">Analyse en composantes principales avec Python</h1>
                <!-- Le titres et meta infos-->
                <span class="post-meta">
                        <a href="https://blog.statoscop.fr/author/antoine.html">Antoine</a>
                    | <time datetime="ven. 16 avril 2021">ven. 16 avril 2021</time>
                </span>

                <!--Table des matieres
-->
                
                <div class="toc"><span class="toctitle">Table des mati√®res</span><ul>
<li><a href="#explication-introductive">Explication introductive</a></li>
<li><a href="#mise-en-oeuvre-dune-acp">Mise en oeuvre d'une ACP</a><ul>
<li><a href="#analyse-exploratoire-de-nos-donnees">Analyse exploratoire de nos donn√©es</a></li>
<li><a href="#utilisation-de-lacp-pour-la-reduction-de-dimensions">Utilisation de l'ACP pour la r√©duction de dimensions</a></li>
</ul>
</li>
</ul>
</div>
<p>Dans cet article, nous allons essayer de comprendre intuitivement comment fonctionne l'analyse en composantes principales. Nous pr√©senterons ensuite √† quoi celle-ci peut servir en prenant les exemples d'une analyse exploratoire des donn√©es et d'une probl√©matique de r√©duction de dimension.   </p>
<h1 id="explication-introductive">Explication introductive</h1>
<p>L'analyse en composantes principales est une m√©thode consistant √† transformer des variables corr√©l√©es entre elles en nouvelles variables. Chacune de ces nouvelles variables est le r√©sultat d'une combinaison lin√©aire des anciennes variables. </p>
<p><em>Note : une combinaison lin√©aire de 3 variables <span class="math">\(V_1\)</span>, <span class="math">\(V_2\)</span> et <span class="math">\(V_3\)</span> s'√©crit <span class="math">\(\alpha_1.V_1 + \alpha_2.V_2 + \alpha_3.V_3\)</span> o√π les <span class="math">\(\alpha_i\)</span> sont des coefficients r√©els.</em></p>
<p>Ces nouvelles variables sont appel√©es <strong>composantes principales</strong> et sont, par contruction, d√©corr√©l√©es les unes des autres.  </p>
<p>Autrement dit, l'ACP projette vos donn√©es dans un nouvel espace. La premi√®re composante principale est construite de mani√®re √† capter la plus grande variance possible de vos donn√©es, la seconde la part la plus importante de la variance possible <strong>restant √† expliquer</strong>, et ainsi de suite.  </p>
<p>Une illustration brillante de ce processus est propos√©e par <a href="https://www.allisonhorst.com/" target="_blank">Allison Horst</a>. Elle <a href="https://twitter.com/allison_horst/status/1288904459490213888" target="_blank">repr√©sente</a> un jeu de donn√©es √† deux dimensions avec des crevettes et l'analyse en composantes principales comme les passages d'un requin-baleine affam√© :  </p>
<p><img alt="Pelican" src="../images/acp/output_3_0.png"></p>
<p><img alt="Pelican" src="../images/acp/output_4_0.png"></p>
<p>La probl√©matique du requin-baleine est en effet la m√™me que celle de la cr√©ation d'une premi√®re composante principale : quel axe choisir pour avaler un maximum de crevettes d√®s le premier passage? L'axe choisi va ressembler √† celui-ci :  </p>
<p><img alt="Pelican" src="../images/acp/output_6_0.png"></p>
<p>Il s'agit pour le requin de choisir la droite de sorte qu'il y ait un maximum de crevettes sur son parcours ce qui revient √† ce que les crevettes soient le plus proche possible de cette droite. Math√©matiquement, la premi√®re composante principale est la combinaison lin√©aire des deux axes <span class="math">\(x\)</span> et <span class="math">\(y\)</span> qui maximise l'inertie projet√©e ce qui revient √† minimiser les √©carts entre les points et cette droite.</p>
<p>Dans cet exemple, la seconde composante principale sera l'axe perpendiculaire √† ce premier axe.</p>
<p>Si les points √©taient parfaitement align√©s sur une ligne, l'ensemble de la variance serait expliqu√© par la premi√®re composante et on serait parvenus √† r√©duire le nombre de dimensions de notre probl√®me sans perte d'information.</p>
<blockquote>
<p>üëã Nous c'est Antoine et Louis de Statoscop, une coop√©rative de statisticiens / data scientists.
Vous voulez en savoir plus sur ce que l'on fait?</p>
</blockquote>
<div class = "d-flex justify-content-center mt-4">
   <a href="https://statoscop.fr" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button">Visiter notre site</a>
   <a href="https://statoscop.fr/contact" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button">Nous contacter</a>
</div>
<p><br>    </p>
<h1 id="mise-en-oeuvre-dune-acp">Mise en oeuvre d'une ACP</h1>
<p>D'accord, on a projet√© notre jeu de donn√©es dans un nouvel espace avec des nouvelles "variables" d√©crites comme combinaisons lin√©aires des pr√©c√©dentes telles que la premi√®re explique la plus grande partie de la variance possible, la seconde la plus grande partie de la variance restant √† expliquer, etc... Mais √ßa nous sert √† quoi?   </p>
<h2 id="analyse-exploratoire-de-nos-donnees">Analyse exploratoire de nos donn√©es</h2>
<p>La caract√©ristique des composantes principales par rapport au jeu de donn√©es non transform√© est que les premi√®res composantes principales ont un fort pouvoir discriminant, puisqu'elles expliquent une grande partie de la variance totale du jeu de donn√©es. Ainsi, repr√©senter notre jeu de donn√©es par rapport aux deux premiers axes de l'ACP peut permettre de v√©rifier que ces donn√©es permettent bien de distinguer diff√©rentes classes.  </p>
<p>Prenons comme exemple la base de donn√©es <code>wine</code> que l'on peut charger directement depuis le module <code>sklearn</code>. Cette base de donn√©es contient des r√©sultats d'analyses chimiques de 178 vins de 3 diff√©rents producteurs. Ces r√©sultats sont synth√©tis√©s par 13 mesures diff√©rentes que l'on retrouve dans les donn√©es. Pour voir si ces mesures permettent ou non de distinguer les vins des trois producteurs, nous allons commencer par repr√©senter les vins sur l'espace des deux premi√®res composantes principales. Pour cela, on importe les donn√©es et on les centre-r√©duit avant d'appliquer notre ACP avec la fonction <code>sklearn.decomposition.PCA</code>. On param√®tre celle-ci pour qu'elle nous renvoie seulement les deux premi√®res composantes :  </p>
<div class="highlight"><pre><span></span><code><span class="kn">import</span> <span class="nn">numpy</span> <span class="k">as</span> <span class="nn">np</span>
<span class="c1"># Import fonction ACP</span>
<span class="kn">from</span> <span class="nn">sklearn.decomposition</span> <span class="kn">import</span> <span class="n">PCA</span>

<span class="c1"># Import donn√©es</span>
<span class="kn">from</span> <span class="nn">sklearn.datasets</span> <span class="kn">import</span> <span class="n">load_wine</span>

<span class="n">values</span><span class="p">,</span> <span class="n">target</span> <span class="o">=</span> <span class="n">load_wine</span><span class="p">(</span><span class="n">return_X_y</span><span class="o">=</span><span class="kc">True</span><span class="p">)</span>
<span class="n">target_names</span> <span class="o">=</span> <span class="n">load_wine</span><span class="p">()</span><span class="o">.</span><span class="n">target_names</span>
<span class="n">feature_names</span> <span class="o">=</span> <span class="n">load_wine</span><span class="p">()</span><span class="o">.</span><span class="n">feature_names</span>
<span class="c1"># on standardise nos donn√©es : </span>
<span class="kn">from</span> <span class="nn">sklearn.preprocessing</span> <span class="kn">import</span> <span class="n">StandardScaler</span>
<span class="n">values_cr</span> <span class="o">=</span> <span class="n">StandardScaler</span><span class="p">()</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">values</span><span class="p">)</span>

<span class="c1"># On param√®tre notre PCA pour garder les deux premi√®res composantes</span>
<span class="n">pca</span><span class="o">=</span><span class="n">PCA</span><span class="p">(</span><span class="mi">2</span><span class="p">)</span>
<span class="n">pca_wine</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">values_cr</span><span class="p">)</span>

<span class="c1"># en sortie : le m√™me nombre de lignes que les donn√©es en entr√©es</span>
<span class="c1"># et le nombre de variables correspondant au nombre de composantes</span>
<span class="c1"># conserv√©es</span>
<span class="n">pca_wine</span><span class="o">.</span><span class="n">shape</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code>(178, 2)
</code></pre></div>

<p>En sortie, nous obtenons les vecteurs des deux premi√®res composantes dans l'objet <code>pca_wine</code>. Notons que nous aurions pu param√©trer la fonction <code>PCA</code> de mani√®re √† ce qu'elle nous renvoie le nombre de composantes n√©cessaire √† expliquer <code>X</code>% de la variance, comme nous le ferons par la suite. Depuis l'objet <code>pca</code>, on peut voir le vecteur de la variance expliqu√©e par chaque composante avec <code>pca.explained_variance_ratio_</code> et donc la variance totale expliqu√©e par nos deux composantes en sommant les √©l√©ments de ce vecteur :  </p>
<div class="highlight"><pre><span></span><code><span class="n">pca</span><span class="o">.</span><span class="n">explained_variance_ratio_</span><span class="o">.</span><span class="n">sum</span><span class="p">()</span>
</code></pre></div>

<div class="highlight"><pre><span></span><code><span class="mf">0.554063383569353</span>
</code></pre></div>

<p>On explique donc 55 % de la variance totale de nos donn√©es avec 2 composantes, alors que celle-ci contient 13 variables. Voyons si cela suffit √† discriminer nos 3 producteurs visuellement :  </p>
<!--- ![Pelican](../images/acp/output_13_0.png)-->
<p><img alt="Pelican" src="../images/acp/output_13_0.png" style="max-width:80% !important" ></p>
<p>On constate ici que les 3 producteurs sont bien r√©partis dans des zones distinctes du plan et ce r√©sultat semble montrer que chacun produit des types de vin caract√©ristiques.</p>
<p>On peut se convaincre que l'ACP a bien jou√© son r√¥le en produisant le m√™me type de sch√©ma avec deux autres variables originales du jeu de donn√©es (sans transformation lin√©aire), disons le degr√© d'alcool et l'intensit√© de la couleur. On s'attend bien s√ªr √† ce que les classes soient moins discrimin√©es qu'avec les deux premi√®res composantes principales :  </p>
<p><img alt="Pelican" src="../images/acp/output_15_0.png" style="max-width:80% !important" ></p>
<p>Ces variables permettent de distinguer des tendances, comme le fait que le producteur 1 produit des vins plut√¥t moins alcoolis√©s et dont la couleur est peu intense alors que le producteur 0 produit des vins plus alcoolis√©s. Mais ces variables seules ne permettent pas de partitionner nos classes aussi clairement qu'avec les deux premi√®res composantes de notre ACP.   </p>
<p>L'ACP ne permet certes pas au premier coup d'oeil de proposer une interpr√©tation des r√©sultats, mais il est n√©anmoins possible d'√©tudier comment chaque variable contribue aux composantes avec l'instruction <code>pca.components_</code> :  </p>
<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Noms des variables</th>
      <th>Composante 1</th>
      <th>Composante 2</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>alcohol</td>
      <td>0.144329</td>
      <td>-0.483652</td>
    </tr>
    <tr>
      <th>1</th>
      <td>malic_acid</td>
      <td>-0.245188</td>
      <td>-0.224931</td>
    </tr>
    <tr>
      <th>2</th>
      <td>ash</td>
      <td>-0.002051</td>
      <td>-0.316069</td>
    </tr>
    <tr>
      <th>3</th>
      <td>alcalinity_of_ash</td>
      <td>-0.239320</td>
      <td>0.010591</td>
    </tr>
    <tr>
      <th>4</th>
      <td>magnesium</td>
      <td>0.141992</td>
      <td>-0.299634</td>
    </tr>
    <tr>
      <th>5</th>
      <td>total_phenols</td>
      <td>0.394661</td>
      <td>-0.065040</td>
    </tr>
    <tr>
      <th>6</th>
      <td>flavanoids</td>
      <td>0.422934</td>
      <td>0.003360</td>
    </tr>
    <tr>
      <th>7</th>
      <td>nonflavanoid_phenols</td>
      <td>-0.298533</td>
      <td>-0.028779</td>
    </tr>
    <tr>
      <th>8</th>
      <td>proanthocyanins</td>
      <td>0.313429</td>
      <td>-0.039302</td>
    </tr>
    <tr>
      <th>9</th>
      <td>color_intensity</td>
      <td>-0.088617</td>
      <td>-0.529996</td>
    </tr>
    <tr>
      <th>10</th>
      <td>hue</td>
      <td>0.296715</td>
      <td>0.279235</td>
    </tr>
    <tr>
      <th>11</th>
      <td>od280/od315_of_diluted_wines</td>
      <td>0.376167</td>
      <td>0.164496</td>
    </tr>
    <tr>
      <th>12</th>
      <td>proline</td>
      <td>0.286752</td>
      <td>-0.364903</td>
    </tr>
  </tbody>
</table>
</div>

<p>Ce tableau repr√©sente les coefficients de la combinaison lin√©aire des variables pour chaque composante. Il nous permet par exemple de constater que l'intensit√© de la couleur et l'alcool jouent fortement et n√©gativement sur la seconde composante. Cela correspond √† ce que l'on observait dans les deux graphiques pr√©c√©dents puisque les vins des producteurs 0 et 2 ont des valeurs n√©gatives sur l'axe de la seconde composante (1er graphique) et ce sont bien ceux dont le taux en alcool et l'intensit√© de la couleur sont les plus importants (2e graphique)</p>
<h2 id="utilisation-de-lacp-pour-la-reduction-de-dimensions">Utilisation de l'ACP pour la r√©duction de dimensions</h2>
<p>La propri√©t√© de l'ACP de capter une partie importante de la variance des donn√©es √† partir de moins de variables est particuli√®rement int√©ressante dans le domaine du Machine Learning pour √™tre capable de fournir des pr√©dictions avec des mod√®les plus l√©gers (car utilisant moins de variables) et des r√©sultats au moins aussi performants.<br>
Pour notre exemple, m√™me si la r√©duction de dimensions n'est pas un enjeu fondamental vu le faible nombre de variables, nous pouvons tester si nous parvenons √† faire un mod√®le de pr√©diction de l'origine du vin (producteur 0, 1 ou 2) en r√©duisant le nombre de dimensions.<br>
Tout d'abord, commen√ßons par d√©terminer ce nombre de dimensions. Le graphique suivant nous donne l'√©volution de la variance expliqu√©e en fonction du nombre de composantes :   </p>
<p><img alt="Pelican" src="../images/acp/output_20_0.png" style="max-width:80% !important" ></p>
<p>L'ACP permettrait d'expliquer plus de 70% de la variance totale d√®s 4 composantes. Pour voir si cela est suffisant pour entra√Æner un mod√®le de pr√©diction, on peut comparer les performances d'un arbre de classification sur les donn√©es transform√©es apr√®s PCA et sur les donn√©es brutes. On utilise une m√©thode de validation crois√©e pour estimer les performances du mod√®le qui consiste √† partitionner les donn√©es en 5 groupes et √† entra√Æner les donn√©es sur 4 groupes et les tester sur celui restant. On fait cela 5 fois pour parcourir le champ des possibles et on √©value la pr√©cision globale du mod√®le en faisant la moyenne de ces 5 r√©sultats. Cette m√©thode doit permettre d'estimer la qualit√© du mod√®le sur des donn√©es sur lesquelles il n'a pas √©t√© entra√Æn√© et de ne pas prendre en compte le surapprentissage dans son √©valuation. Le tableau suivant donne les taux de pr√©cision obtenus pour chaque m√©thode, c'est √† dire le nombre de vins correctement classifi√©s sur le nombre de vins total.</p>
<div class="highlight"><pre><span></span><code><span class="c1"># Plut√¥t que de renseigner le nombre de composantes </span>
<span class="c1"># on renseigne la valeur minimum de la variance </span>
<span class="c1"># expliqu√©e totale que l&#39;on souhaite</span>
<span class="n">pca</span><span class="o">=</span><span class="n">PCA</span><span class="p">(</span><span class="mf">0.70</span><span class="p">)</span> 
<span class="n">wine_pca</span> <span class="o">=</span> <span class="n">pca</span><span class="o">.</span><span class="n">fit_transform</span><span class="p">(</span><span class="n">values_cr</span><span class="p">)</span>

<span class="c1"># On entra√Æne notre mod√®le et on l&#39;√©value avec une </span>
<span class="c1"># m√©thode de validation crois√©e </span>
<span class="kn">from</span> <span class="nn">sklearn.model_selection</span> <span class="kn">import</span> <span class="n">cross_val_score</span>
<span class="kn">from</span> <span class="nn">sklearn.tree</span> <span class="kn">import</span> <span class="n">DecisionTreeClassifier</span>
<span class="n">clf</span> <span class="o">=</span> <span class="n">DecisionTreeClassifier</span><span class="p">(</span><span class="n">random_state</span><span class="o">=</span><span class="mi">0</span><span class="p">)</span>
<span class="n">mean_pca</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">wine_pca</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>
<span class="n">mean_all</span> <span class="o">=</span> <span class="n">cross_val_score</span><span class="p">(</span><span class="n">clf</span><span class="p">,</span> <span class="n">values</span><span class="p">,</span> <span class="n">target</span><span class="p">,</span> <span class="n">cv</span><span class="o">=</span><span class="mi">5</span><span class="p">)</span><span class="o">.</span><span class="n">mean</span><span class="p">()</span>

<span class="n">pd</span><span class="o">.</span><span class="n">DataFrame</span><span class="p">({</span><span class="s2">&quot;Pr√©cision moyenne apr√®s ACP&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">mean_pca</span><span class="p">],</span> 
              <span class="s2">&quot;Pr√©cision moyenne sans ACP&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">mean_all</span><span class="p">],</span> 
              <span class="s2">&quot;Nombre de composantes&quot;</span> <span class="p">:</span> <span class="p">[</span><span class="n">wine_pca</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]]})</span>
</code></pre></div>

<div>
<style scoped>
    .dataframe tbody tr th:only-of-type {
        vertical-align: middle;
    }

    .dataframe tbody tr th {
        vertical-align: top;
    }

    .dataframe thead th {
        text-align: right;
    }
</style>
<table border="1" class="dataframe">
  <thead>
    <tr style="text-align: right;">
      <th></th>
      <th>Pr√©cision moyenne apr√®s ACP</th>
      <th>Pr√©cision moyenne sans ACP</th>
      <th>Nombre de composantes</th>
    </tr>
  </thead>
  <tbody>
    <tr>
      <th>0</th>
      <td>0.933175</td>
      <td>0.887619</td>
      <td>4</td>
    </tr>
  </tbody>
</table>
</div>

<p>On constate que l'ACP n'a pas seulement permis de r√©duire le nombre de dimensions de notre probl√®me, elle nous offre aussi une pr√©cision globale du mod√®le sup√©rieure. Cela n'est pas toujours le cas - puisque √ßa d√©pend de votre probl√©matique, des variables explicatives dont vous disposez et du nombre de composantes que vous retenez - mais ici c'est d√ª au fait qu'elle permet de r√©duire le bruit associ√© aux donn√©es en ne conservant qu'une partie de l'information totale. Cela permet ainsi de pr√©venir les probl√®mes de surapprentissage, c'est √† dire le fait que le mod√®le explique parfaitement les donn√©es d'entra√Ænement mais se g√©n√©ralise mal √† de nouvelles donn√©es. Ce sujet est abord√© dans <a href="https://blog.statoscop.fr/larbitrage-biaisvariance-dans-la-modelisation-de-donnees.html">cet article de notre blog sur l'arbitrage biais/variance</a>.  </p>
<p>C'est tout pour aujourd'hui! Si vous voulez voir d'autres exemples d'utilisation de l'ACP, je vous conseille <a href="https://jakevdp.github.io/PythonDataScienceHandbook/05.09-principal-component-analysis.html" target="_blank">cet article</a> qui aborde notamment le cas du traitement des images, pour lequel il est particuli√®rement int√©ressant de r√©duire le nombre de dimensions. N'h√©sitez pas √† <a href="https://www.statoscop.fr">visiter notre site</a> et √† nous suivre sur <a href="https://twitter.com/stato_scop">Twitter</a> pour ne pas rater les prochains articles! Vous pouvez trouver le notebook avec l'ensemble du code ayant servi √† g√©n√©rer cette note sur le <a href="https://github.com/Statoscop/notebooks-blog" target="_blank">github de Statoscop</a>.   </p>
<div class = "d-flex justify-content-center mt-4">
   <a href="https://statoscop.fr" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button">Visiter notre site</a>
   <a href="https://statoscop.fr/contact" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button">Nous contacter</a>
</div>
<p><br>  </p>
<script type="text/javascript">if (!document.getElementById('mathjaxscript_pelican_#%@#$@#')) {
    var align = "center",
        indent = "0em",
        linebreak = "false";

    if (false) {
        align = (screen.width < 768) ? "left" : align;
        indent = (screen.width < 768) ? "0em" : indent;
        linebreak = (screen.width < 768) ? 'true' : linebreak;
    }

    var mathjaxscript = document.createElement('script');
    mathjaxscript.id = 'mathjaxscript_pelican_#%@#$@#';
    mathjaxscript.type = 'text/javascript';
    mathjaxscript.src = 'https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.3/latest.js?config=TeX-AMS-MML_HTMLorMML';

    var configscript = document.createElement('script');
    configscript.type = 'text/x-mathjax-config';
    configscript[(window.opera ? "innerHTML" : "text")] =
        "MathJax.Hub.Config({" +
        "    config: ['MMLorHTML.js']," +
        "    TeX: { extensions: ['AMSmath.js','AMSsymbols.js','noErrors.js','noUndefined.js'], equationNumbers: { autoNumber: 'none' } }," +
        "    jax: ['input/TeX','input/MathML','output/HTML-CSS']," +
        "    extensions: ['tex2jax.js','mml2jax.js','MathMenu.js','MathZoom.js']," +
        "    displayAlign: '"+ align +"'," +
        "    displayIndent: '"+ indent +"'," +
        "    showMathMenu: true," +
        "    messageStyle: 'normal'," +
        "    tex2jax: { " +
        "        inlineMath: [ ['\\\\(','\\\\)'] ], " +
        "        displayMath: [ ['$$','$$'] ]," +
        "        processEscapes: true," +
        "        preview: 'TeX'," +
        "    }, " +
        "    'HTML-CSS': { " +
        "        availableFonts: ['STIX', 'TeX']," +
        "        preferredFont: 'STIX'," +
        "        styles: { '.MathJax_Display, .MathJax .mo, .MathJax .mi, .MathJax .mn': {color: 'inherit ! important'} }," +
        "        linebreaks: { automatic: "+ linebreak +", width: '90% container' }," +
        "    }, " +
        "}); " +
        "if ('default' !== 'default') {" +
            "MathJax.Hub.Register.StartupHook('HTML-CSS Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax['HTML-CSS'].FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
            "MathJax.Hub.Register.StartupHook('SVG Jax Ready',function () {" +
                "var VARIANT = MathJax.OutputJax.SVG.FONTDATA.VARIANT;" +
                "VARIANT['normal'].fonts.unshift('MathJax_default');" +
                "VARIANT['bold'].fonts.unshift('MathJax_default-bold');" +
                "VARIANT['italic'].fonts.unshift('MathJax_default-italic');" +
                "VARIANT['-tex-mathit'].fonts.unshift('MathJax_default-italic');" +
            "});" +
        "}";

    (document.body || document.getElementsByTagName('head')[0]).appendChild(configscript);
    (document.body || document.getElementsByTagName('head')[0]).appendChild(mathjaxscript);
}
</script>
            </section>

            <section class="post-info">
                <div class="post-share">
                    <a class="twitter" href="https://twitter.com/share?text=Analyse en composantes principales avec Python&amp;url=https://blog.statoscop.fr/acp-python.html" onclick="window.open(this.href, 'twitter-share', 'width=550,height=235');return false;">
                    <i class="ic ic-twitter"></i><span class="hidden">Twitter</span>
                    </a>
                    <div class="clear"></div>
                </div>

                <aside class="post-tags">
<a href="https://blog.statoscop.fr/tag/python.html">Python</a><a href="https://blog.statoscop.fr/tag/machine-learning.html">Machine Learning</a><a href="https://blog.statoscop.fr/tag/statistiques.html">Statistiques</a><a href="https://blog.statoscop.fr/tag/data-science.html">Data Science</a>                </aside>

                <div class="clear"></div>


                </section>


                <aside class="post-nav">
                    <div class="clear"></div>
                </aside>

            </div>
        </article>
    </main>
    
    <!-- Footer-->
    <footer class="footer py-4">
        <div class="container">
            <div class="row align-items-center">
                <div class="col-lg-4 text-lg-left"> ¬© Statoscop</div>
                <div class="col-lg-4 my-3 my-lg-0">
                    <a class="btn btn-dark btn-social mx-2" href="https://twitter.com/stato_scop" target="_blank"><i class="fab fa-twitter"></i></a>
                </div>
                <div class="col-lg-4 text-lg-left"> 
                    Blog publi√© avec <a class="js-scroll-trigger text-info" href="https://docs.getpelican.com/en/latest/"  target="_blank">Pelican</a> et
                     d√©ploy√© sur <a class="js-scroll-trigger text-info" href="https://pages.github.com/"  target="_blank">Github Pages</a>.
                </div>
            </div>
        </div>
    </footer>

    <!-- Bootstrap core JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
    <script src="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/js/bootstrap.bundle.min.js"></script>
    <!-- Third party plugin JS-->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-easing/1.4.1/jquery.easing.min.js"></script>
    <script type="text/javascript" src="https://blog.statoscop.fr/themes/statoscop/static/js/script.js"></script>

  </body>
</html>