<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom"><title>Le blog - DataViz</title><link href="https://blog.statoscop.fr/" rel="alternate"></link><link href="https://blog.statoscop.fr/feeds/dataviz.atom.xml" rel="self"></link><id>https://blog.statoscop.fr/</id><updated>2026-01-23T00:00:00+01:00</updated><entry><title>Faire appara√Ætre le z√©ro sur l'axe des ordonn√©es dans vos visualisations : arguments et exemples</title><link href="https://blog.statoscop.fr/faire-apparaitre-le-zero-sur-laxe-des-ordonnees-dans-vos-visualisations-arguments-et-exemples.html" rel="alternate"></link><published>2026-01-23T00:00:00+01:00</published><updated>2026-01-23T00:00:00+01:00</updated><author><name>Antoine</name></author><id>tag:blog.statoscop.fr,2026-01-23:/faire-apparaitre-le-zero-sur-laxe-des-ordonnees-dans-vos-visualisations-arguments-et-exemples.html</id><summary type="html">&lt;p&gt;Comment choisir les repr√©sentations les plus pertinentes pour ne pas fausser l'interpr√©tation de vos dataviz.&lt;/p&gt;</summary><content type="html">&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Dans cet article&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#interpretations-fallacieuses-de-visualisations-sans-le-zero-sur-laxe-des-ordonnees"&gt;Interpr√©tations fallacieuses de visualisations sans le z√©ro sur l'axe des ordonn√©es&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#mauvais-rendu-des-quantites-reelles-pour-les-graphiques-en-barres"&gt;Mauvais rendu des quantit√©s r√©elles pour les graphiques en barres&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#evolutions-trompeuses-avec-les-courbes"&gt;√âvolutions trompeuses avec les courbes&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#alternatives-quand-il-semble-complique-de-faire-apparaitre-le-zero-sur-laxe-des-ordonnees"&gt;Alternatives quand il semble compliqu√© de faire appara√Ætre le z√©ro sur l'axe des ordonn√©es&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#probleme-quand-le-zero-nest-pas-une-valeur-possible-des-donnees"&gt;Probl√®me quand le z√©ro n'est pas une valeur possible des donn√©es&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#visualisations-alternatives"&gt;Visualisations alternatives&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#pour-vos-prochaines-dataviz"&gt;Pour vos prochaines dataviz&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;Dans cette note on s'int√©resse √† un d√©bat classique dans le milieu de la dataviz et de l'analyse des donn√©es en g√©n√©ral : l'obligation (ou non) de &lt;strong&gt;faire appara√Ætre le z√©ro sur l'axe des ordonn√©es&lt;/strong&gt;. Comme d'habitude, on essaye de vous expliquer intuitivement les causes de ce d√©bat √¢pre (si si!) et de vous proposer une approche pour &lt;strong&gt;ne pas tromper involontairement&lt;/strong&gt; les lecteurs de vos prochaines visualisations de donn√©es.&lt;/p&gt;
&lt;h1 id="interpretations-fallacieuses-de-visualisations-sans-le-zero-sur-laxe-des-ordonnees"&gt;Interpr√©tations fallacieuses de visualisations sans le z√©ro sur l'axe des ordonn√©es&lt;/h1&gt;
&lt;p&gt;Le choix de l'intervalle des valeurs pr√©sent√©es sur l'axe des ordonn√©es dans une visualisation se porte souvent sur les valeurs minimum et maximum des donn√©es √† disposition. Pourquoi le fait de &lt;strong&gt;ne pas mettre le z√©ro sur l'axe des ordonn√©es est trompeur&lt;/strong&gt;? Nous allons essayer de r√©pondre en distinguant les graphiques en barres et les courbes.&lt;/p&gt;
&lt;h2 id="mauvais-rendu-des-quantites-reelles-pour-les-graphiques-en-barres"&gt;Mauvais rendu des quantit√©s r√©elles pour les graphiques en barres&lt;/h2&gt;
&lt;p&gt;C'est le cas le plus clair : &lt;strong&gt;l'absence de z√©ro dans un graphique en barres fausse compl√®tement l'interpr√©tation de ceux-ci&lt;/strong&gt;. Un exemple tr√®s parlant recens√© par &lt;a href="https://quoidansmonassiette.fr/tromper-avec-graphiques-representations-visuelles-pour-manipuler-opinion-publique-guide/"&gt;le site Quoi Dans Mon Assiette&lt;/a&gt; est celui de la visualisation du taux de gr√©viste fourni par la SNCF durant une mobilisation en avril 2018 :&lt;/p&gt;
&lt;p&gt;&lt;img alt="Pelican" src="../images/zero-y-axis/clipboard-1.png"&gt;&lt;/p&gt;
&lt;p&gt;Cette visualition vise assez √©videmment √† &lt;strong&gt;insister sur la baisse de la participation aux gr√®ves&lt;/strong&gt;. Visuellement, il semble que &lt;strong&gt;celle-ci a chut√© de moiti√© au moins&lt;/strong&gt;. En effet, notre cerveau compare logiquement les volumes des deux barres et constate que &lt;strong&gt;l'une est environ deux fois plus petite que l'autre&lt;/strong&gt;. Or, si la baisse est r√©elle, elle est seulement de 4 points de pourcentage soit une baisse d'√† peine plus de 10%, loin du rendu visuel propos√© par la communication de la SNCF. Cette &lt;strong&gt;manipulation de l'ampleur du ph√©nom√®ne&lt;/strong&gt; est enti√®rement d√ªe √† l'absence du z√©ro sur l'axe des ordonn√©es. Voici comment rend la visualisation correctement reproduite par les auteurs de l'article :&lt;/p&gt;
&lt;p&gt;&lt;img alt="Pelican" src="../images/zero-y-axis/clipboard-2.png"&gt;&lt;/p&gt;
&lt;p&gt;&lt;strong&gt;L'effet est moins spectaculaire&lt;/strong&gt; mais le rendu est bien plus fid√®le aux faits. Dans le cas des graphiques en colonnes, il y a donc &lt;strong&gt;un certain consensus&lt;/strong&gt; sur le fait que le z√©ro sur l'axe des ordonn√©es n'est "pas n√©gociable", du fait que le lecteur compare forc√©ment les volumes et que &lt;strong&gt;ceux-ci n'ont pas de sens si les colonnes ne partent pas de z√©ro&lt;/strong&gt;. Mais qu'en est-il des courbes?&lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;üëã Nous c'est Antoine et Louis de Statoscop, une coop√©rative de statisticiens / data scientists.
Vous voulez en savoir plus sur ce que l'on fait?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class = "d-flex justify-content-center mt-4"&gt;
   &lt;a href="https://statoscop.fr" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button"&gt;Visiter notre site&lt;/a&gt;
   &lt;a href="https://statoscop.fr/contact" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button"&gt;Nous contacter&lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br&gt;    &lt;/p&gt;
&lt;h2 id="evolutions-trompeuses-avec-les-courbes"&gt;√âvolutions trompeuses avec les courbes&lt;/h2&gt;
&lt;p&gt;Dans le cas des courbes, &lt;a href="https://stats.stackexchange.com/questions/184525/how-to-determine-whether-or-not-the-y-axis-of-a-graph-should-start-at-zero"&gt;le sujet fait plus d√©bat&lt;/a&gt;. D'ailleurs, &lt;strong&gt;&lt;code&gt;ggplot2&lt;/code&gt; ne met pas le z√©ro par d√©faut sur l'axe des ordonn√©es pour les graphiques avec &lt;code&gt;geom_line&lt;/code&gt; alors qu'il le fait avec &lt;code&gt;geom_col&lt;/code&gt; ou &lt;code&gt;geom_bar.&lt;/code&gt;&lt;/strong&gt;&lt;/p&gt;
&lt;p&gt;Pourtant, le fait de ne pas inclure le z√©ro dans ce type de graphiques nous semble aussi poser probl√®me. Prenons l'exemple du r√©chauffement climatique, qui se traduit notamment par une augmentation des temp√©ratures √† la surface mondiales. On r√©cup√®re ici ces donn√©es sur le site &lt;a href="https://ourworldindata.org/"&gt;Our World In Data&lt;/a&gt;. Voil√† ce que donne une repr√©sentation classique de ces donn√©es si nous s√©lectionnons de mani√®re malveillante les ann√©es 2016 √† 2022 :  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Pelican" src="../images/zero-y-axis/unnamed-chunk-2-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;On voit ici qu'en plus d'avoir s√©lectionn√© les ann√©es qui nous convenaient pour faire passer un message trompeur, c'est bien &lt;strong&gt;l'√©chelle des ordonn√©es de type min/max qui rend les variations des temp√©ratures artificiellement √©lev√©es&lt;/strong&gt; entre 2016 et 2022. En effet, les donn√©es dans leur ensemble racontent un tout autre message :  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Pelican" src="../images/zero-y-axis/unnamed-chunk-3-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;h1 id="alternatives-quand-il-semble-complique-de-faire-apparaitre-le-zero-sur-laxe-des-ordonnees"&gt;Alternatives quand il semble compliqu√© de faire appara√Ætre le z√©ro sur l'axe des ordonn√©es&lt;/h1&gt;
&lt;p&gt;Le dernier graphique montrant les temp√©ratures moyennes entre 1950 et 2025 semble plus acceptable que le pr√©c√©dent, m√™me s'il se contente de prendre une √©chelle min/max pour l'axe des ordonn√©es. Et s'il est en effet bien moins incorrect, c'est &lt;strong&gt;parce qu'il contient presque l'ensemble des valeurs de temp√©rature moyenne connues par l'√™tre humain&lt;/strong&gt; (qui n'ont pas beaucoup vari√© avant 1950). &lt;/p&gt;
&lt;h2 id="probleme-quand-le-zero-nest-pas-une-valeur-possible-des-donnees"&gt;Probl√®me quand le z√©ro n'est pas une valeur &lt;em&gt;possible&lt;/em&gt; des donn√©es&lt;/h2&gt;
&lt;p&gt;On pourrait en effet arguer que se "forcer" √† inclure le z√©ro sur l'axe des ordonn√©es, alors m√™me qu'une temp√©rature moyenne mondiale √† z√©ro degr√© n'aurait aucun sens sur la plan√®te telle qu'on la conna√Æt, fausserait le r√©sultat. Tout d'abord &lt;strong&gt;cela aurait tendance √† minimiser le constat&lt;/strong&gt; du r√©chauffement climatique actuel, et cela donnerait en plus un &lt;strong&gt;graphique avec un grand espace inutilis√©&lt;/strong&gt; (et inutilisable, puisque ne contenant pas des valeurs plausibles de nos donn√©es) :  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Pelican" src="../images/zero-y-axis/unnamed-chunk-4-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;h2 id="visualisations-alternatives"&gt;Visualisations alternatives&lt;/h2&gt;
&lt;p&gt;Alors, que faire? Dans ce cas, &lt;strong&gt;inclure le z√©ro dans l'axe des ordonn√©es ne semble pas pertinent&lt;/strong&gt;. Mais cette r√®gle a l'avantage d'avoir une certaine objectivit√© et de ne pas permettre √† chacun de faire en fonction de ce qui l'arrange. Si l'on souhaite continuer √† s'y tenir, on peut imaginer des solutions alternatives. Souvent, il s'agira de &lt;strong&gt;visualiser des variations plut√¥t que des niveaux&lt;/strong&gt;. Cette solution permet √† la fois d'avoir &lt;strong&gt;une √©chelle des ordonn√©es incluant le z√©ro&lt;/strong&gt; et donc moins trompeuse, et de mettre en √©vidence les tendances. Dans notre cas, on peut par exemple calculer la diff√©rence entre la temp√©rature moyenne d'une ann√©e par rapport √† la temp√©rature moyenne sur tout une p√©riode. On choisit alors de &lt;strong&gt;repr√©senter les donn√©es sous forme de barres&lt;/strong&gt; car cela nous semble mieux illustrer que nous pr√©sentons pour chaque ann√©e des √©carts √† une valeur fixe :  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Pelican" src="../images/zero-y-axis/unnamed-chunk-5-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;h1 id="pour-vos-prochaines-dataviz"&gt;Pour vos prochaines dataviz&lt;/h1&gt;
&lt;p&gt;Que l'on vous ait convaincu ou pas d'essayer d'inclure le z√©ro dans vos dataviz, on esp√®re au moins que vous aurez d√©sormais l'≈ìil pour rep√©rer ces visualisations qui - volontairement ou non - trompent le lecteur sur l'ampleur d'un ph√©nom√®ne. Il va de toute fa√ßon de soi &lt;strong&gt;qu'aucune r√®gle immuable ne pourra jamais nous permettre de nous passer d'un regard critique et constructif&lt;/strong&gt; sur les r√©sultats qui nous sont soumis et que l'on soumet. &lt;/p&gt;
&lt;p&gt;C'est tout pour aujourd'hui! Si vous avez besoin de conseils en programmation pour &lt;a href="https://statoscop.fr"&gt;la statistique et la data science&lt;/a&gt;, n'h√©sitez pas √† nous contacter sur notre site, ou sur nos r√©seaux &lt;a href="https://bsky.app/profile/statoscop.fr"&gt;BlueSky&lt;/a&gt; ou &lt;a href="https://www.linkedin.com/company/statoscop"&gt;Linkedin&lt;/a&gt;.&lt;/p&gt;
&lt;div class = "d-flex justify-content-center mt-4"&gt;
   &lt;a href="https://statoscop.fr" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button"&gt;Visiter notre site&lt;/a&gt;
   &lt;a href="https://statoscop.fr/contact" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button"&gt;Nous contacter&lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br&gt;  &lt;/p&gt;</content><category term="R"></category><category term="R"></category><category term="ggplot2"></category><category term="dataviz"></category></entry><entry><title>Graphiques et diagrammes √† barres empil√©es : pr√©sentation d'une alternative avec R et ggplot2</title><link href="https://blog.statoscop.fr/graphiques-et-diagrammes-a-barres-empilees-presentation-dune-alternative-avec-r-et-ggplot2.html" rel="alternate"></link><published>2025-04-28T00:00:00+02:00</published><updated>2025-04-28T00:00:00+02:00</updated><author><name>Antoine</name></author><id>tag:blog.statoscop.fr,2025-04-28:/graphiques-et-diagrammes-a-barres-empilees-presentation-dune-alternative-avec-r-et-ggplot2.html</id><summary type="html">&lt;p&gt;Une alternative pour visualiser des sous-ensembles et leur total sans les empiler&lt;/p&gt;</summary><content type="html">&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Dans cet article&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#dechiffrer-un-diagramme-a-barres-empilees"&gt;D√©chiffrer un diagramme √† barres empil√©es&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#segmenter-plutot-quempiler-vos-barres-avec-ggplot2"&gt;Segmenter plut√¥t qu'empiler vos barres avec ggplot2&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#visualiser-levolution-de-la-pauvrete-dans-le-monde-par-regions"&gt;Visualiser l'√©volution de la pauvret√© dans le monde par r√©gions&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#le-graphique-a-barres-segmentees-avec-total"&gt;Le graphique √† barres segment√©es avec total&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;li&gt;&lt;a href="#choisir-le-graphique-adapte-a-son-probleme"&gt;Choisir le graphique adapt√© √† son probl√®me&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;Aujourd'hui nous vous proposons un petit article dataviz avec ggplot2 pour apporter notre modeste contribution √† des discussions vues ici et l√† sur &lt;strong&gt;la pertinence des graphiques √† barres empil√©es&lt;/strong&gt;, en anglais &lt;strong&gt;stacked bar charts&lt;/strong&gt;. Plus sp√©cifiquement, on se propose de coder en ggplot2 une visualisation vue sur &lt;a href="https://www.flerlagetwins.com/2025/04/the-best-alternative-to-stacked-bar.html"&gt;un article pr√©sentant la meilleur alternative aux graphiques empil√©es&lt;/a&gt; (selon son auteur).  &lt;/p&gt;
&lt;h1 id="dechiffrer-un-diagramme-a-barres-empilees"&gt;D√©chiffrer un diagramme √† barres empil√©es&lt;/h1&gt;
&lt;p&gt;Un graphique √† barres empil√©es permet &lt;strong&gt;d'illustrer l'√©volution ou la comparaison d'une mesure globale, tout en la d√©clinant par des sous-ensembles&lt;/strong&gt;. Par exemple, on peut utiliser la base &lt;code&gt;diamonds&lt;/code&gt; de ggplot2 pour pr√©senter la puret√© de la coupe des diamants (variable &lt;code&gt;clarity&lt;/code&gt;) en fonction de la qualit√© de leur taille (variable &lt;code&gt;cut&lt;/code&gt;) : &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nf"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ggplot2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;
&lt;span class="n"&gt;diamonds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;ggplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cut&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;clarity&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;# par d√©faut, geom_bar s&amp;#39;ex√©cute avec position = &amp;quot;stack&amp;quot; :&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_bar&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme_minimal&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img alt="Pelican" src="../images/graph_bar_empilees/unnamed-chunk-2-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Que nous indique ce graphique? Pas grand chose en r√©alit√©, si √ßa n'est que notre base contient d'autant plus de diamants que la qualit√© de leur taille est bonne. Mais pour d√©duire la m√™me chose de chaque niveau de puret√© de diamants, il faut se livrer √† un exercice de concentration intense que ne devrait pas n√©cessiter une bonne visualisation. √Ä part pour le niveau &lt;code&gt;IF&lt;/code&gt;, le plus pur, dont ont voit clairement que le nombre augmente avec la qualit√© de la taille, &lt;strong&gt;il est difficile d'√©valuer l'augmentation relative de chaque sous-ensemble, d'autant plus que les effectifs totaux diff√®rent&lt;/strong&gt;.  &lt;/p&gt;
&lt;p&gt;Bien s√ªr, on peut d√©cider de changer l√©g√®rement le type de notre graphique et de repr√©senter plut√¥t la r√©partition relative du niveau de puret√© des diamants &lt;strong&gt;pour chaque qualit√© de taille&lt;/strong&gt;, en sp√©cifiant le param√®tre &lt;code&gt;position&lt;/code&gt; de geom_bar √† &lt;code&gt;fill&lt;/code&gt; :  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;diamonds&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;ggplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;cut&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;clarity&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_bar&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;position&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;fill&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme_minimal&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img alt="Pelican" src="../images/graph_bar_empilees/unnamed-chunk-3-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;√Ä part pour les niveaux extr√™mes de puret√© (&lt;code&gt;I1&lt;/code&gt; et &lt;code&gt;IF&lt;/code&gt;), l'√©volution de la r√©partition pour chaque cat√©gorie de diamants demeure assez obscur, et on a en plus perdu l'information sur le nombre de diamants totaux que chaque cat√©gorie repr√©sente!&lt;br&gt;
Ce probl√®me, soulev√© par nombre de sp√©cialistes de la dataviz, et notamment &lt;a href="https://www.data-to-viz.com/caveat/stacking.html"&gt;Yan Holtz dans un article r√©cent&lt;/a&gt;, a pouss√© certains √† chercher des alternatives. L'id√©e est de pouvoir &lt;strong&gt;pr√©senter clairement √† la fois l'√©volution d'un total et de ses sous-ensembles&lt;/strong&gt;. &lt;/p&gt;
&lt;blockquote&gt;
&lt;p&gt;üëã Nous c'est Antoine et Louis de Statoscop, une coop√©rative de statisticiens / data scientists.
Vous voulez en savoir plus sur ce que l'on fait?&lt;/p&gt;
&lt;/blockquote&gt;
&lt;div class = "d-flex justify-content-center mt-4"&gt;
   &lt;a href="https://statoscop.fr" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button"&gt;Visiter notre site&lt;/a&gt;
   &lt;a href="https://statoscop.fr/contact" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button"&gt;Nous contacter&lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br&gt;    &lt;/p&gt;
&lt;h1 id="segmenter-plutot-quempiler-vos-barres-avec-ggplot2"&gt;Segmenter plut√¥t qu'empiler vos barres avec ggplot2&lt;/h1&gt;
&lt;p&gt;Nous proposons ici &lt;a href="https://www.flerlagetwins.com/2025/04/the-best-alternative-to-stacked-bar.html"&gt;d'appliquer la m√©thode pr√©sent√©e par Kevin Flerlage&lt;/a&gt;. La solution qu'il propose avec l'outil Tableau nous semble √©l√©gante et &lt;strong&gt;nous montrons ici comment la mettre en oeuvre avec&lt;/strong&gt; &lt;code&gt;ggplot2&lt;/code&gt;.  &lt;/p&gt;
&lt;h2 id="visualiser-levolution-de-la-pauvrete-dans-le-monde-par-regions"&gt;Visualiser l'√©volution de la pauvret√© dans le monde par r√©gions&lt;/h2&gt;
&lt;p&gt;On s'appuie ici sur des donn√©es de &lt;a href="https://ourworldindata.org"&gt;World In Data&lt;/a&gt; en 2010, 2016, 2020 et 2024. On choisit de regarder l'√©volution du nombre de personnes sous le seuil de 2.15$ par jour, d√©clin√©e par grande r√©gion du monde.  &lt;/p&gt;
&lt;p&gt;Avec &lt;code&gt;ggplot2&lt;/code&gt; et &lt;code&gt;geom_col&lt;/code&gt;, on peut facilement proposer une repr√©sentation avec un graphique √† barres empil√©es :  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nf"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scales&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# pour scale du y-axis&lt;/span&gt;
&lt;span class="nf"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ggtext&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="c1"&gt;# pour mise en forme du titre&lt;/span&gt;

&lt;span class="n"&gt;data_wid_country&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;ggplot&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_col&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Year&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;`Number below $2.15 a day`&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Region&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;scale_y_continuous&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;labels&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;label_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scale&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1e-6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;suffix&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;M&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;labs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;The evolution of poverty in the World&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;caption&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Source : World Bank (2024) ‚Äì processed by Our World in Data (https://ourworldindata.org)&lt;/span&gt;
&lt;span class="s"&gt;       This data is adjusted for inflation and for differences in living costs between countries.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme_minimal&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;plot.title&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;element_markdown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                                      &lt;/span&gt;&lt;span class="n"&gt;hjust&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;legend.position&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bottom&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img alt="Pelican" src="../images/graph_bar_empilees/unnamed-chunk-4-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Ce graphique nous permet de voir une baisse du nombre de personnes pauvres entre 2010 et 2016 puis une stagnation de cet indicateur entre 2016 et 2024. Il &lt;strong&gt;ne nous permet cependant pas d'√©valuer pr√©cis√©ment l'√©volution au sein de chaque r√©gion du monde&lt;/strong&gt;. &lt;/p&gt;
&lt;h2 id="le-graphique-a-barres-segmentees-avec-total"&gt;Le graphique √† barres segment√©es avec total&lt;/h2&gt;
&lt;p&gt;Nous traduisons ici le terme propos√© par Kevin Flerlage. L'id√©e est la suivante : on va juxtaposer plut√¥t qu'empiler les diff√©rents sous-ensembles. On va pour cela utiliser le param√®tre &lt;code&gt;position = "dodge"&lt;/code&gt; de &lt;code&gt;geom_col&lt;/code&gt;.  &lt;/p&gt;
&lt;p&gt;Le probl√®me √† ce stade est bien s√ªr &lt;strong&gt;qu'on ne dispose plus d'estimation du total&lt;/strong&gt;. Il s'agit donc d'ajouter &lt;strong&gt;une barre totale qui englobe les barres des sous-ensembles&lt;/strong&gt;, avec une transparence pour permettre une bonne visibilit√©. C'est un jeu d'enfant avec &lt;code&gt;ggplot2&lt;/code&gt; puisqu'il s'agit simplement d'ajouter un &lt;code&gt;geom_col&lt;/code&gt; et de lui choisir une couleur avec &lt;code&gt;fill&lt;/code&gt; et un niveau de transparence avec &lt;code&gt;alpha&lt;/code&gt;.  &lt;/p&gt;
&lt;p&gt;Si on consid√®re qu'il n'est pas assez explicite que la barre ajout√©e correspond au total, on peut s'en sortir en ajoutant dans le titre la m√™me couleur que celle de la barre transparente. Le r√©sultat est le suivant :  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;data_wid_country&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;|&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;ggplot&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_col&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Year&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;`Number below $2.15 a day`&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;               &lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Region&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="c1"&gt;# changement de la position&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;position&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;dodge&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="c1"&gt;# ajout d&amp;#39;un geom_col&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_col&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;Year&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;`Number below $2.15 a day`&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="w"&gt;           &lt;/span&gt;&lt;span class="n"&gt;alpha&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;fill&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;#C77CFF&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;scale_y_continuous&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;labels&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;label_number&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;scale&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1e-6&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;suffix&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;M&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;labs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;The evolution of poverty &amp;lt;span style=&amp;#39;color:#C77CFF;&amp;#39;&amp;gt;in the World&amp;lt;/span&amp;gt;&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;caption&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Source : World Bank (2024) ‚Äì processed by Our World in Data (https://ourworldindata.org)&lt;/span&gt;
&lt;span class="s"&gt;       This data is adjusted for inflation and for differences in living costs between countries.&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme_minimal&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;plot.title&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;element_markdown&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;17&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;                                      &lt;/span&gt;&lt;span class="n"&gt;hjust&lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="m"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;legend.position&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;bottom&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img alt="Pelican" src="../images/graph_bar_empilees/unnamed-chunk-5-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;On constate en effet que la lecture nous semble plus explicite : au niveau mondial sur notre p√©riode de temps, le nombre de pauvres a baiss√©. Cela se traduit cependant par deux trajectoires diff√©rentes : une baisse tr√®s marqu√©e dans la r√©gion Asie-Pacifique et un hausse en Afrique.&lt;/p&gt;
&lt;h1 id="choisir-le-graphique-adapte-a-son-probleme"&gt;Choisir le graphique adapt√© √† son probl√®me&lt;/h1&gt;
&lt;p&gt;Cette proposition d'alternatives aux graphiques √† barres empil√©es nous semble int√©ressante, notamment dans ce cas sp√©cifique ou &lt;strong&gt;le total repr√©sente la somme de ses sous-ensembles&lt;/strong&gt;. Dans le cas o√π on voudrait par exemple &lt;strong&gt;repr√©senter une moyenne totale et la comparer √† des moyennes de sous-ensembles&lt;/strong&gt;, on pr√©coniserait sans doute de pr√©senter celle-ci avec une forme diff√©rente, comme un point ou un losange. Le code pr√©sent√© ci-dessus peut-√™tre utilis√© de la m√™me mani√®re en changeant le &lt;code&gt;geom_col&lt;/code&gt; par ce qui vous semble appropri√©.  &lt;/p&gt;
&lt;p&gt;Enfin, lorsque votre probl√©matique contient de nombreux sous-ensembles, &lt;strong&gt;ce choix n'est probablement pas adapt√© car le total peut avoir une √©chelle trop diff√©rente de chacun des sous-ensembles&lt;/strong&gt;. C'est le cas par exemple pour la probl√©matique des diamants que je pr√©sentais en d√©but de post, et pour laquelle le graphique √† barres segment√©es n'aurait pas donn√© un r√©sultat satisfaisant :  &lt;/p&gt;
&lt;p&gt;&lt;img alt="Pelican" src="../images/graph_bar_empilees/unnamed-chunk-6-1.png"&gt;&lt;!-- --&gt;&lt;/p&gt;
&lt;p&gt;Pour autant, &lt;strong&gt;on ne vous recommande pas non plus de faire un graphique avec deux axes verticaux&lt;/strong&gt;. Cela pourra faire l'objet d'une prochaine note de blog! &lt;/p&gt;
&lt;p&gt;C'est tout pour aujourd'hui! On esp√®re que cette note vous d√©bloquera dans le choix de votre prochaine repr√©sentation graphique. Si vous avez besoin de conseils en programmation pour &lt;a href="https://statoscop.fr"&gt;la statistique et la data science&lt;/a&gt;, n'h√©sitez pas √† nous contacter sur notre site, &lt;a href="https://bsky.app/profile/statoscop.fr"&gt;BlueSky&lt;/a&gt; ou &lt;a href="https://www.linkedin.com/company/statoscop"&gt;Linkedin&lt;/a&gt;.&lt;/p&gt;
&lt;div class = "d-flex justify-content-center mt-4"&gt;
   &lt;a href="https://statoscop.fr" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button"&gt;Visiter notre site&lt;/a&gt;
   &lt;a href="https://statoscop.fr/contact" target=_blank class="btn btn-primary btn-custom text-uppercase" type="button"&gt;Nous contacter&lt;/a&gt;
&lt;/div&gt;
&lt;p&gt;&lt;br&gt;  &lt;/p&gt;</content><category term="R"></category><category term="R"></category><category term="ggplot2"></category><category term="dataviz"></category></entry><entry><title>Ggplot2 : mise en forme d'un barplot</title><link href="https://blog.statoscop.fr/ggplot2-mise-en-forme-dun-barplot.html" rel="alternate"></link><published>2022-08-22T00:00:00+02:00</published><updated>2022-08-22T00:00:00+02:00</updated><author><name>Antoine</name></author><id>tag:blog.statoscop.fr,2022-08-22:/ggplot2-mise-en-forme-dun-barplot.html</id><summary type="html">&lt;p&gt;R√©alisation et mise en forme d'un graphique en colonnes avec ggplot2.&lt;/p&gt;</summary><content type="html">&lt;div class="toc"&gt;&lt;span class="toctitle"&gt;Dans cet article&lt;/span&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#creer-notre-premier-graphique-avec-geom_col"&gt;Cr√©er notre premier graphique avec geom_col&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#mettre-en-forme-le-graphique"&gt;Mettre en forme le graphique&lt;/a&gt;&lt;ul&gt;
&lt;li&gt;&lt;a href="#ordonner-laffichage-en-fonction-de-la-valeur-de-la-variable-dinteret"&gt;Ordonner l'affichage en fonction de la valeur de la variable d'int√©r√™t&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#mise-en-forme-des-axes"&gt;Mise en forme des axes&lt;/a&gt;&lt;/li&gt;
&lt;li&gt;&lt;a href="#utilisation-dun-theme"&gt;Utilisation d'un th√®me&lt;/a&gt;&lt;/li&gt;
&lt;/ul&gt;
&lt;/li&gt;
&lt;/ul&gt;
&lt;/div&gt;
&lt;p&gt;Dans cette note nous proposons un petit cas pratique pour illustrer la mise en forme d'un graphique en colonnes, ou barplot, avec le package R &lt;code&gt;ggplot2&lt;/code&gt;. On s'appuie pour cela sur les donn√©es de la &lt;a href="https://www.gapminder.org/"&gt;fondation Gapminder&lt;/a&gt; en s'int√©ressant √† la part des d√©penses de sant√© financ√©es par l'Etat dans les 30 pays les plus peupl√©s au monde.  &lt;/p&gt;
&lt;h1 id="creer-notre-premier-graphique-avec-geom_col"&gt;Cr√©er notre premier graphique avec geom_col&lt;/h1&gt;
&lt;p&gt;Notre objectif dans cet exemple est d'afficher le taux de d√©penses de sant√© financ√©es par l'√âtat pour chaque pays pr√©sent dans la base. Ce barplot se r√©alise avec &lt;code&gt;ggplot2&lt;/code&gt; √† l'aide de &lt;code&gt;geom_col&lt;/code&gt;. En effet, nous voulons repr√©senter la valeur d'une variable (ce taux de d√©penses) pour chaque modalit√© donn√©e d'une variable cat√©gorielle (le pays). Si nous avions voulu repr√©senter le nombre de fois o√π une variable cat√©gorielle appara√Æt dans la base, nous aurions utilis√© &lt;code&gt;geom_bar&lt;/code&gt;.&lt;br&gt;
Avec ces √©l√©ments, le premier graphique qui nous viendrait √† l'esprit en utilisant &lt;code&gt;ggplot2&lt;/code&gt; serait le suivant :  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;df_health&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&amp;gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;ggplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gvt_health_exp_10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_col&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img alt="Pelican" src="../images/geom_col_files/figure-html/unnamed-chunk-1-1.png"&gt;  &lt;/p&gt;
&lt;p&gt;Il est bien s√ªr illisible, en raison notamment du grand nombre de pays repr√©sent√© et du fait que leurs noms ne peuvent pas s'afficher correctement sur l'axe des abscisses. On peut corriger √ßa en faisant une rotation de l'√©tiquette des axes de 90¬∞ avec &lt;code&gt;theme(axis.text.x = element_text(angle = 90))&lt;/code&gt;. Les barres sont √©galement trop rapproch√©es, ce que l'on va corriger avec le param√®tre &lt;code&gt;width&lt;/code&gt; de &lt;code&gt;geom_col&lt;/code&gt;. On obtient avec ces r√©glages rapides le graphique suivant :  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;df_health&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&amp;gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;ggplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gvt_health_exp_10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_col&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis.text.x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;element_text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;angle&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;90&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img alt="Pelican" src="../images/geom_col_files/figure-html/unnamed-chunk-2-1.png"&gt;  &lt;/p&gt;
&lt;p&gt;C'est d√©j√† mieux! Mais il reste un peu de travail pour faciliter la lecture de ce graphique.  &lt;/p&gt;
&lt;h1 id="mettre-en-forme-le-graphique"&gt;Mettre en forme le graphique&lt;/h1&gt;
&lt;p&gt;Pour rendre ce graphique plus agr√©able √† lire et plus compr√©hensible, on propose d'ordonner l'affichage en fonction de la valeur du r√©sultat, de mettre en forme et d'inverser les axes et enfin de changer quelques √©l√©ments graphiques. &lt;/p&gt;
&lt;h2 id="ordonner-laffichage-en-fonction-de-la-valeur-de-la-variable-dinteret"&gt;Ordonner l'affichage en fonction de la valeur de la variable d'int√©r√™t&lt;/h2&gt;
&lt;p&gt;Un √©l√©ment important de ce graphique est que les pays sont pr√©sent√©s dans l'ordre alphab√©tique, ce qui n'a pas d'int√©r√™t pour le lecteur. On peut facilement changer l'ordre d'affichage des modalit√©s de l'axe des abscisses en le conditionnant aux valeurs de l'axe des ordonn√©es. On utilise pour cela dans l'instruction &lt;code&gt;aes()&lt;/code&gt; la fonction &lt;code&gt;reorder()&lt;/code&gt; au moment de la d√©finition du &lt;code&gt;x&lt;/code&gt;, qui nous permet de l'ordonner de mani√®re croissante ou d√©croissante en fonction de notre variable d'int√©r√™t :  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="c1"&gt;# par ordre croissant &lt;/span&gt;
&lt;span class="n"&gt;df_health&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&amp;gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;ggplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;reorder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gvt_health_exp_10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gvt_health_exp_10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_col&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis.text.x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;element_text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;angle&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;90&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;

&lt;span class="c1"&gt;# par ordre d√©croissant&lt;/span&gt;
&lt;span class="n"&gt;df_health&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&amp;gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;ggplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;reorder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&lt;/span&gt;&lt;span class="n"&gt;gvt_health_exp_10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gvt_health_exp_10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_col&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0.5&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis.text.x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;element_text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;angle&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;90&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img alt="Pelican" src="../images/geom_col_files/figure-html/order_desc_asc.png"&gt;  &lt;/p&gt;
&lt;p&gt;Il est maintenant bien  plus facile de situer chaque pays par rapport aux autres.  &lt;/p&gt;
&lt;h2 id="mise-en-forme-des-axes"&gt;Mise en forme des axes&lt;/h2&gt;
&lt;p&gt;Avec l'instruction &lt;code&gt;labs&lt;/code&gt;, on d√©finit tout d'abord les titres de nos axes ainsi que le titre g√©n√©ral du graphique. Puis, dans &lt;code&gt;scale_y_continuous&lt;/code&gt;, on met en forme l'axe repr√©sentant les parts de d√©penses de sant√© :&lt;br&gt;
- avec le param√®tre &lt;code&gt;labels&lt;/code&gt; on fait appara√Ætre les √©tiquettes sous forme de pourcentage gr√¢ce √† la fonction &lt;code&gt;scales::percent()&lt;/code&gt;.&lt;br&gt;
- avec le param√®tre &lt;code&gt;limits&lt;/code&gt; on fait en sorte que les pourcentages affich√©s aillent jusqu'√† 1, de mani√®re √† ce que le lecteur ait une repr√©sentation plus juste de ce que serait la part de d√©penses restantes financ√©es par les patients ou des organismes d'assurance priv√©s.&lt;br&gt;
- le param√®tre &lt;code&gt;expand = c(0, 0)&lt;/code&gt; permet de supprimer les espaces avant et apr√®s les valeurs minimum et maximum de notre variable d'int√©r√™t.&lt;br&gt;
Pour mieux lire les noms des pays, on intervertit l'axe des ordonn√©es et des abscisses avec l'instruction &lt;code&gt;coord_flip()&lt;/code&gt; pour avoir un graphique en barres horizontales. Enfin, on r√®gle la taille des labels des √©l√©ments de x et de y.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="n"&gt;df_health&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;%&amp;gt;%&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;ggplot&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="nf"&gt;aes&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;reorder&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;country&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gvt_health_exp_10&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;gvt_health_exp_10&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;geom_col&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;width&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0.2&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;labs&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Pays&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;y&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Part de d√©penses de sant√©&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;
&lt;span class="w"&gt;       &lt;/span&gt;&lt;span class="n"&gt;title&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="s"&gt;&amp;quot;Part des d√©penses de sant√© financ√©es par l&amp;#39;Etat\n dans les 30 pays les plus peupl√©s&amp;quot;&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;scale_y_continuous&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;labels&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;~&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;scales&lt;/span&gt;&lt;span class="o"&gt;::&lt;/span&gt;&lt;span class="nf"&gt;percent&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;.&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;accuracy&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="w"&gt;                     &lt;/span&gt;&lt;span class="n"&gt;limits&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;1&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;expand&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;c&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;,&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;0&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;coord_flip&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;-&amp;gt;&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="n"&gt;plot_health&lt;/span&gt;

&lt;span class="n"&gt;plot_health&lt;/span&gt;&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis.text.x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;element_text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;6&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;axis.text.y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;element_text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img alt="Pelican" src="../images/geom_col_files/figure-html/unnamed-chunk-4-1.png"&gt;  &lt;/p&gt;
&lt;h2 id="utilisation-dun-theme"&gt;Utilisation d'un th√®me&lt;/h2&gt;
&lt;p&gt;Pour l'affichage graphique il est possible de r√©gler chaque √©l√©ment du graphique comme on le souhaite. Le plus facile reste cependant d'utiliser les nombreux th√®mes existants disponibles, par d√©faut dans &lt;code&gt;ggplot2&lt;/code&gt; ou en installant d'autres packages, comme &lt;code&gt;ggthemes&lt;/code&gt;. Pour les utiliser il suffit d'ajouter l'instruction &lt;code&gt;+ theme_*()&lt;/code&gt; √† la suite de votre plot. Le th√®me par d√©faut dans ggplot2 est &lt;code&gt;theme_gray&lt;/code&gt;. On vous pr√©sente le r√©sultat donn√© par &lt;code&gt;theme_economist&lt;/code&gt;, disponible dans la librairie &lt;code&gt;ggthemes&lt;/code&gt;, qui reprend la charte graphique du magazine &lt;em&gt;The Economist&lt;/em&gt;. On ajuste √©galement la taille des labels √† ce nouveau th√®me.  &lt;/p&gt;
&lt;div class="highlight"&gt;&lt;pre&gt;&lt;span&gt;&lt;/span&gt;&lt;code&gt;&lt;span class="nf"&gt;library&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;ggthemes&lt;/span&gt;&lt;span class="p"&gt;)&lt;/span&gt;

&lt;span class="n"&gt;plot_health&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;theme_economist&lt;/span&gt;&lt;span class="p"&gt;()&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;+&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;
&lt;span class="w"&gt;  &lt;/span&gt;&lt;span class="nf"&gt;theme&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;axis.text.x&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;element_text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;7&lt;/span&gt;&lt;span class="p"&gt;),&lt;/span&gt;
&lt;span class="w"&gt;        &lt;/span&gt;&lt;span class="n"&gt;axis.text.y&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="nf"&gt;element_text&lt;/span&gt;&lt;span class="p"&gt;(&lt;/span&gt;&lt;span class="n"&gt;size&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="o"&gt;=&lt;/span&gt;&lt;span class="w"&gt; &lt;/span&gt;&lt;span class="m"&gt;8&lt;/span&gt;&lt;span class="p"&gt;))&lt;/span&gt;
&lt;/code&gt;&lt;/pre&gt;&lt;/div&gt;

&lt;p&gt;&lt;img alt="Pelican" src="../images/geom_col_files/figure-html/unnamed-chunk-5-1.png"&gt;  &lt;/p&gt;
&lt;p&gt;C'est la fin de cet article! N'h√©sitez pas √† &lt;a href="https://www.statoscop.fr"&gt;visiter notre site&lt;/a&gt; et √† nous suivre sur &lt;a href="https://twitter.com/stato_scop"&gt;Twitter&lt;/a&gt; et &lt;a href="https://www.linkedin.com/company/statoscop"&gt;Linkedin&lt;/a&gt;. Pour retrouver l'ensemble du code ayant servi √† g√©n√©rer cette note, vous pouvez vous rendre sur le &lt;a href="https://github.com/Statoscop/notebooks-blog"&gt;github de Statoscop&lt;/a&gt;.  &lt;/p&gt;</content><category term="R"></category><category term="R"></category><category term="ggplot2"></category><category term="dataviz"></category><category term="graphiques"></category><category term="barplot"></category></entry></feed>